<html>
    <head>
        <link href="/expunge/styles/main.css" type="text/css" rel="stylesheet"/>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.3.0/knockout-min.js"></script>
        <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
        <script src="scripts/main.js"></script>
    </head>
<body>

    <div id="surveyContainer"></div>
    <div id="surveyResponse"></div>

    <script>

    var surveyJSON = {
      title: "Tell us, what technologies do you use?",
      pages: [

          { name:"page1", questions: [
            { type: "radiogroup", choices: [ "Yes", "No" ], isRequired: true, name: "step1Question1",title: "Was the county of record Travis County Texas?" },
            { type: "radiogroup", choices: [ "Yes", "No" ], isRequired: true, name: "step1Question2",title: "Were you older than 18 years at the time of the incident?", visible: false },
	 { type: "radiogroup", choices: [ "Yes", "No" ], isRequired: true, name: "step1Question3",title: "Were you released without a charge?", visible: false },
          ] }

      ],

      triggers: [
          { type: "visible", operator: "equal", value: "Yes", name:"step1Question1", questions: ["step1Question2"]},
          { type: "visible", operator: "equal", value: "Yes", name: "step1Question2", questions: ["step1Question3"]}
      ]
    }

    var felonyJSON = {
      title: "Tell us, what technologies do you use?",
      pages: [

          { name:"page1", questions: [
            { type: "radiogroup", choices: [ "Yes", "No" ], isRequired: true, name: "step2Question1",title: "Was the incident a felony?" },
            { type: "radiogroup", choices: [ "Yes", "No" ], isRequired: true, name: "step2Question2",title: "Has it been five years from the date of your order of dismissal?", visible: false }
          ] }

      ],

      triggers: [
          { type: "visible", operator: "equal", value: "Yes", name:"step2Question1", questions: ["step2Question2"]}
      ]
    }

    var misJSON = {
      title: "Tell us, what technologies do you use?",
      pages: [

          { name:"page1", questions: [
            { type: "radiogroup", choices: [ "Yes", "No" ], isRequired: true, name: "step3Question1",title: "Was the incident a misdemeanor?" },
            { type: "radiogroup", choices: [ "Yes", "No" ], isRequired: true, name: "step3Question2",title: "Has it been three years from the date of your order of dismissal?", visible: false }
          ] }

      ],

      triggers: [
          { type: "visible", operator: "equal", value: "Yes", name:"step3Question1", questions: ["step3Question2"]}
      ]
    }
    
    var survey = new Survey.Survey(surveyJSON, "surveyContainer");

    survey.onComplete.add(function (s) {
    
      if (s.data.step1Question1 == 'Yes' && s.data.step1Question2 == 'Yes' && s.data.step1Question3 == 'Yes') {  document.location.href='eligibility-expunge.html'; }
      else if (s.data.step1Question1 == 'Yes' && s.data.step1Question2 == 'No') {  document.location.href='eligibility-under18.html'; }
      else {
	delete survey;
	
	var survey2 = new Survey.Survey(felonyJSON, "surveyContainer");
	
	survey2.onComplete.add(function (s) {
	
		 if (s.data.step2Question1 == 'Yes' && s.data.step2Question2 == 'Yes') {  document.location.href='eligibility-expunge.html'; }
		 else  if (s.data.step2Question1 == 'Yes' && s.data.step2Question2 == 'No') {  document.location.href='eligibility-possible.html'; }
		 else if (s.data.step2Question1 == 'No') {
		 
			delete survey2;
			var survey3 = new Survey.Survey(misJSON, "surveyContainer");
			
			survey2.onComplete.add(function (s) {
	
				if (s.data.step2Question1 == 'Yes' && s.data.step2Question2 == 'Yes') {  document.location.href='eligibility-3.html'; }
		 
			});
			
		}
	
	});
	
      }
      
    });

    </script>
</body>
</html>
