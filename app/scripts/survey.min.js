/*!
* surveyjs - Survey JavaScript library v0.9.7
* (c) Andrew Telnov - http://surveyjs.org/
* License: MIT (http://www.opensource.org/licenses/mit-license.php)
*/

var Survey;!function(e){var t=function(){function e(e,t){void 0===t&&(t=null),this.text=t,this.value=e}return e.setData=function(t,n){t.length=0;for(var o=0;o<n.length;o++){var r=n[o],i=new e(null);"undefined"!=typeof r.value?(i.text=r.text,i.value=r.value):i.value=r,t.push(i)}},e.getData=function(e){for(var t=new Array,n=0;n<e.length;n++){var o=e[n];o.hasText?t.push({value:o.value,text:o.text}):t.push(o.value)}return t},e.prototype.getType=function(){return"itemvalue"},Object.defineProperty(e.prototype,"value",{get:function(){return this.itemValue},set:function(t){if(this.itemValue=t,this.itemValue){var n=this.itemValue.toString(),o=n.indexOf(e.Separator);o>-1&&(this.itemValue=n.slice(0,o),this.text=n.slice(o+1))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasText",{get:function(){return!!this.itemText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.hasText?this.itemText:this.value?this.value.toString():null},set:function(e){this.itemText=e},enumerable:!0,configurable:!0}),e.Separator="|",e}();e.ItemValue=t;var n=function(){function e(){}return e.prototype.getType=function(){throw new Error("This method is abstract")},e}();e.Base=n;var o=function(){function e(){}return e.prototype.getText=function(){throw new Error("This method is abstract")},e}();e.SurveyError=o;var r=function(){function e(){}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return null==this.callbacks||0==this.callbacks.length},enumerable:!0,configurable:!0}),e.prototype.fire=function(e,t){if(null!=this.callbacks)for(var n=0;n<this.callbacks.length;n++){this.callbacks[n](e,t)}},e.prototype.add=function(e){null==this.callbacks&&(this.callbacks=new Array),this.callbacks.push(e)},e.prototype.remove=function(e){if(null!=this.callbacks){var t=this.callbacks.indexOf(e,0);void 0!=t&&this.callbacks.splice(t,1)}},e}();e.Event=r}(Survey||(Survey={}));var Survey;!function(e){var t=function(){function e(){}return e.prototype.loadSurvey=function(t,n){var o=new XMLHttpRequest;o.open("GET",e.serviceUrl+"/getSurvey?surveyId="+t),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onload=function(){var e=JSON.parse(o.response);n(200==o.status,e,o.response)},o.send()},e.prototype.sendResult=function(t,n,o,r,i){void 0===r&&(r=null),void 0===i&&(i=!1);var s=new XMLHttpRequest;s.open("POST",e.serviceUrl+"/post/"),s.setRequestHeader("Content-Type","application/json; charset=utf-8");var a={postId:t,surveyResult:JSON.stringify(n)};r&&(a.clientId=r),i&&(a.isPartialCompleted=!0);var u=JSON.stringify(a);s.setRequestHeader("Content-Length",u.length.toString());s.onload=function(){o(200==s.status,s.response)},s.send(u)},e.prototype.getResult=function(t,n,o){var r=new XMLHttpRequest,i="resultId="+t+"&name="+n;r.open("GET",e.serviceUrl+"/getResult?"+i),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded");r.onload=function(){var e=null,t=null;if(200==r.status){e=JSON.parse(r.response),t=[];for(var n in e.QuestionResult){var i={name:n,value:e.QuestionResult[n]};t.push(i)}}o(200==r.status,e,t,r.response)},r.send()},e.prototype.isCompleted=function(t,n,o){var r=new XMLHttpRequest,i="resultId="+t+"&clientId="+n;r.open("GET",e.serviceUrl+"/isCompleted?"+i),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded");r.onload=function(){var e=null;200==r.status&&(e=JSON.parse(r.response)),o(200==r.status,e,r.response)},r.send()},e.serviceUrl="https://dxsurveyapi.azurewebsites.net/api/Survey",e}();e.dxSurveyService=t}(Survey||(Survey={}));var Survey;!function(e){e.surveyLocalization={currentLocale:"",locales:{},getString:function(t){var n=this.currentLocale?this.locales[this.currentLocale]:e.surveyStrings;return n&&n[t]||(n=e.surveyStrings),n[t]},getLocales:function(){var e=[];e.push("");for(var t in this.locales)e.push(t);return e}},e.surveyStrings={pagePrevText:"Previous",pageNextText:"Next",completeText:"Complete",otherItemText:"Other (describe)",progressText:"Page {0} of {1}",emptySurvey:"There is no any visible page or visible question in the survey.",completingSurvey:"Thank You for Completing the Survey!",loadingSurvey:"Survey is loading from the server...",optionsCaption:"Choose...",requiredError:"Please answer the question.",numericError:"The value should be a numeric.",textMinLength:"Please enter at least {0} symbols.",minSelectError:"Please select at least {0} variants.",maxSelectError:"Please select not more than {0} variants.",numericMinMax:"The '{0}' should be equal or more than {1} and equal or less than {2}",numericMin:"The '{0}' should be equal or more than {1}",numericMax:"The '{0}' should be equal or less than {1}",invalidEmail:"Please enter a valid e-mail."},e.surveyLocalization.locales.en=e.surveyStrings,String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,n){return"undefined"!=typeof e[n]?e[n]:t})})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(){t.call(this)}return __extends(n,t),n.prototype.getText=function(){return e.surveyLocalization.getString("requiredError")},n}(e.SurveyError);e.AnswerRequiredError=t;var n=function(t){function n(){t.call(this)}return __extends(n,t),n.prototype.getText=function(){return e.surveyLocalization.getString("numericError")},n}(e.SurveyError);e.RequreNumericError=n;var o=function(e){function t(t){e.call(this),this.text=t}return __extends(t,e),t.prototype.getText=function(){return this.text},t}(e.SurveyError);e.CustomError=o}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(){function e(e){this.name=e,this.typeValue=null,this.choicesValue=null,this.choicesfunc=null,this.className=null,this.classNamePart=null,this.baseClassName=null,this.defaultValue=null,this.onGetValue=null}return Object.defineProperty(e.prototype,"type",{get:function(){return this.typeValue?this.typeValue:"string"},set:function(e){this.typeValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasToUseGetValue",{get:function(){return this.onGetValue},enumerable:!0,configurable:!0}),e.prototype.isDefaultValue=function(e){return this.defaultValue?this.defaultValue==e:!e},e.prototype.getValue=function(e){return this.onGetValue?this.onGetValue(e):null},Object.defineProperty(e.prototype,"hasToUseSetValue",{get:function(){return this.onSetValue},enumerable:!0,configurable:!0}),e.prototype.setValue=function(e,t,n){this.onSetValue&&this.onSetValue(e,t,n)},e.prototype.getObjType=function(e){return this.classNamePart?e.replace(this.classNamePart,""):e},e.prototype.getClassName=function(e){return this.classNamePart&&e.indexOf(this.classNamePart)<0?e+this.classNamePart:e},Object.defineProperty(e.prototype,"choices",{get:function(){return null!=this.choicesValue?this.choicesValue:null!=this.choicesfunc?this.choicesfunc():null},enumerable:!0,configurable:!0}),e.prototype.setChoices=function(e,t){this.choicesValue=e,this.choicesfunc=t},e}();e.JsonObjectProperty=t;var n=function(){function e(n,o,r,i){void 0===r&&(r=null),void 0===i&&(i=null),this.name=n,this.creator=r,this.parentName=i,this.properties=null,this.requiredProperties=null,this.properties=new Array;for(var s=0;s<o.length;s++){var a=o[s],u=null,l=a.indexOf(e.typeSymbol);l>-1&&(u=a.substring(l+1),a=a.substring(0,l));var a=this.getPropertyName(a),c=new t(a);u&&(c.type=u),this.properties.push(c)}}return e.prototype.find=function(e){for(var t=0;t<this.properties.length;t++)if(this.properties[t].name==e)return this.properties[t];return null},e.prototype.getPropertyName=function(t){return 0==t.length||t[0]!=e.requiredSymbol?t:(t=t.slice(1),this.requiredProperties||(this.requiredProperties=new Array),this.requiredProperties.push(t),t)},e.requiredSymbol="!",e.typeSymbol=":",e}();e.JsonMetadataClass=n;var o=function(){function e(){this.classes={},this.childrenClasses={},this.classProperties={},this.classRequiredProperties={}}return e.prototype.addClass=function(e,t,o,r){void 0===o&&(o=null),void 0===r&&(r=null);var i=new n(e,t,o,r);if(this.classes[e]=i,r){var s=this.childrenClasses[r];s||(this.childrenClasses[r]=[]),this.childrenClasses[r].push(i)}return i},e.prototype.overrideClassCreatore=function(e,t){var n=this.findClass(e);n&&(n.creator=t)},e.prototype.setPropertyValues=function(e,t,n,o,r,i){void 0===o&&(o=null),void 0===r&&(r=null),void 0===i&&(i=null);var s=this.findProperty(e,t);s&&(s.className=n,s.defaultValue=o,s.onGetValue=r,s.onSetValue=i)},e.prototype.setPropertyChoices=function(e,t,n,o){void 0===o&&(o=null);var r=this.findProperty(e,t);r&&r.setChoices(n,o)},e.prototype.setPropertyClassInfo=function(e,t,n,o){void 0===o&&(o=null);var r=this.findProperty(e,t);r&&(r.baseClassName=n,r.classNamePart=o)},e.prototype.getProperties=function(e){var t=this.classProperties[e];return t||(t=new Array,this.fillProperties(e,t),this.classProperties[e]=t),t},e.prototype.createClass=function(e){var t=this.findClass(e);return t?t.creator():null},e.prototype.getChildrenClasses=function(e,t){void 0===t&&(t=!1);var n=[];return this.fillChildrenClasses(e,t,n),n},e.prototype.getRequiredProperties=function(e){var t=this.classRequiredProperties[e];return t||(t=new Array,this.fillRequiredProperties(e,t),this.classRequiredProperties[e]=t),t},e.prototype.fillChildrenClasses=function(e,t,n){var o=this.childrenClasses[e];if(o)for(var r=0;r<o.length;r++)t&&!o[r].creator||n.push(o[r]),this.fillChildrenClasses(o[r].name,t,n)},e.prototype.findClass=function(e){return this.classes[e]},e.prototype.findProperty=function(e,t){var n=this.findClass(e);return n?n.find(t):null},e.prototype.fillProperties=function(e,t){var n=this.findClass(e);if(n){n.parentName&&this.fillProperties(n.parentName,t);for(var o=0;o<n.properties.length;o++)this.addProperty(n.properties[o],t,t.length)}},e.prototype.addProperty=function(e,t,n){for(var o=-1,r=0;n>r;r++)if(t[r].name==e.name){o=r;break}0>o?t.push(e):t[o]=e},e.prototype.fillRequiredProperties=function(e,t){var n=this.findClass(e);n&&(n.requiredProperties&&Array.prototype.push.apply(t,n.requiredProperties),n.parentName&&this.fillRequiredProperties(n.parentName,t))},e}();e.JsonMetadata=o;var r=function(){function e(e,t){this.type=e,this.message=t,this.description="",this.at=-1}return e.prototype.getFullDescription=function(){return this.message+(this.description?"\n"+this.description:"")},e}();e.JsonError=r;var i=function(e){function t(t,n){e.call(this,"unknownproperty","The property '"+t+"' in class '"+n+"' is unknown."),this.propertyName=t,this.className=n;var o=c.metaData.getProperties(n);if(o){this.description="The list of available properties are: ";for(var r=0;r<o.length;r++)r>0&&(this.description+=", "),this.description+=o[r].name;this.description+="."}}return __extends(t,e),t}(r);e.JsonUnknownPropertyError=i;var s=function(e){function t(t,n,o){e.call(this,n,o),this.baseClassName=t,this.type=n,this.message=o,this.description="The following types are available: ";for(var r=c.metaData.getChildrenClasses(t,!0),i=0;i<r.length;i++)i>0&&(this.description+=", "),this.description+="'"+r[i].name+"'";this.description+="."}return __extends(t,e),t}(r);e.JsonMissingTypeErrorBase=s;var a=function(e){function t(t,n){e.call(this,n,"missingtypeproperty","The property type is missing in the object. Please take a look at property: '"+t+"'."),this.propertyName=t,this.baseClassName=n}return __extends(t,e),t}(s);e.JsonMissingTypeError=a;var u=function(e){function t(t,n){e.call(this,n,"incorrecttypeproperty","The property type is incorrect in the object. Please take a look at property: '"+t+"'."),this.propertyName=t,this.baseClassName=n}return __extends(t,e),t}(s);e.JsonIncorrectTypeError=u;var l=function(e){function t(t,n){e.call(this,"requiredproperty","The property '"+t+"' is required in class '"+n+"'."),this.propertyName=t,this.className=n}return __extends(t,e),t}(r);e.JsonRequiredPropertyError=l;var c=function(){function e(){this.errors=new Array}return Object.defineProperty(e,"metaData",{get:function(){return e.metaDataValue},enumerable:!0,configurable:!0}),e.prototype.toJsonObject=function(e){return this.toJsonObjectCore(e,null)},e.prototype.toObject=function(t,n){if(t){var o=null;if(n.getType&&(o=e.metaData.getProperties(n.getType())),o)for(var r in t)if(r!=e.typePropertyName)if(r!=e.positionPropertyName){var s=this.findProperty(o,r);s?this.valueToObj(t[r],n,r,s):this.addNewError(new i(r.toString(),n.getType()),t)}else n[r]=t[r]}},e.prototype.toJsonObjectCore=function(t,n){if(!t.getType)return t;var o={};null==n||n.className||(o[e.typePropertyName]=n.getObjType(t.getType()));for(var r=e.metaData.getProperties(t.getType()),i=0;i<r.length;i++)this.valueToJson(t,o,r[i]);return o},e.prototype.valueToJson=function(e,t,n){var o=null;if(o=n.hasToUseGetValue?n.getValue(e):e[n.name],!n.isDefaultValue(o)){if(this.isValueArray(o)){for(var r=[],i=0;i<o.length;i++)r.push(this.toJsonObjectCore(o[i],n));o=r.length>0?r:null}else o=this.toJsonObjectCore(o,n);n.isDefaultValue(o)||(t[n.name]=o)}},e.prototype.valueToObj=function(e,t,n,o){if(null!=e){if(null!=o&&o.hasToUseSetValue)return void o.setValue(t,e,this);if(this.isValueArray(e))return void this.valueToArray(e,t,n,o);var r=this.createNewObj(e,o);r.newObj&&(this.toObject(e,r.newObj),e=r.newObj),r.error||(t[n]=e)}},e.prototype.isValueArray=function(e){return e.constructor.toString().indexOf("Array")>-1},e.prototype.createNewObj=function(t,n){var o={newObj:null,error:null},r=t[e.typePropertyName];return!r&&null!=n&&n.className&&(r=n.className),r=n.getClassName(r),o.newObj=r?e.metaData.createClass(r):null,o.error=this.checkNewObjectOnErrors(o.newObj,t,n,r),o},e.prototype.checkNewObjectOnErrors=function(t,n,o,r){var i=null;if(t){var s=e.metaData.getRequiredProperties(r);if(s)for(var c=0;c<s.length;c++)if(!n[s[c]]){i=new l(s[c],r);break}}else o.baseClassName&&(i=r?new u(o.name,o.baseClassName):new a(o.name,o.baseClassName));return i&&this.addNewError(i,n),i},e.prototype.addNewError=function(t,n){n&&n[e.positionPropertyName]&&(t.at=n[e.positionPropertyName].start),this.errors.push(t)},e.prototype.valueToArray=function(e,t,n,o){this.isValueArray(t[n])||(t[n]=[]);for(var r=0;r<e.length;r++){var i=this.createNewObj(e[r],o);i.newObj?(t[n].push(i.newObj),this.toObject(e[r],i.newObj)):i.error||t[n].push(e[r])}},e.prototype.findProperty=function(e,t){if(!e)return null;for(var n=0;n<e.length;n++)if(e[n].name==t)return e[n];return null},e.typePropertyName="type",e.positionPropertyName="pos",e.metaDataValue=new o,e}();e.JsonObject=c}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t){e.call(this),this.name=t,this.visibleValue=!0,this.visibleIndexValue=-1,this.width="100%",this.onCreating()}return __extends(t,e),Object.defineProperty(t.prototype,"visible",{get:function(){return this.visibleValue},set:function(e){e!=this.visible&&(this.visibleValue=e,this.fireCallback(this.visibilityChangedCallback),this.data&&this.data.questionVisibilityChanged(this,this.visible))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleIndex",{get:function(){return this.visibleIndexValue},enumerable:!0,configurable:!0}),t.prototype.hasErrors=function(){return!1},Object.defineProperty(t.prototype,"hasTitle",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasComment",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.setData=function(e){this.data=e,this.onSetData()},t.prototype.fireCallback=function(e){e&&e()},t.prototype.onSetData=function(){},t.prototype.onCreating=function(){},t.prototype.onSurveyValueChanged=function(e){},t.prototype.setVisibleIndex=function(e){this.visibleIndexValue!=e&&(this.visibleIndexValue=e,this.fireCallback(this.visibleIndexChangedCallback))},t}(e.Base);e.QuestionBase=t,e.JsonObject.metaData.addClass("questionbase",["!name","visible:boolean","width"]),e.JsonObject.metaData.setPropertyValues("questionbase","visible",null,!0),e.JsonObject.metaData.setPropertyValues("questionbase","width",null,"100%")}(Survey||(Survey={}));var Survey;!function(e){var t=function(){function e(){this.creatorHash={}}return e.prototype.registerQuestion=function(e,t){this.creatorHash[e]=t},e.prototype.getAllTypes=function(){var e=new Array;for(var t in this.creatorHash)e.push(t);return e.sort()},e.prototype.createQuestion=function(e,t){var n=this.creatorHash[e];return null==n?null:n(t)},e.Instance=new e,e.DefaultChoices=["one","two|second value",{value:3,text:"third value"}],e}();e.QuestionFactory=t}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(e){void 0===e&&(e=""),t.call(this),this.name=e,this.questions=new Array,this.data=null,this.title="",this.visibleIndex=-1,this.numValue=-1,this.visibleValue=!0;var n=this;this.questions.push=function(e){return null!=n.data&&e.setData(n.data),Array.prototype.push.call(this,e)}}return __extends(n,t),Object.defineProperty(n.prototype,"processedTitle",{get:function(){return null!=this.data?this.data.processText(this.title):this.title},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"num",{get:function(){return this.numValue},set:function(e){this.numValue!=e&&(this.numValue=e,this.onNumChanged(e))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visible",{get:function(){return this.visibleValue},set:function(e){e!==this.visible&&(this.visibleValue=e,null!=this.data&&this.data.pageVisibilityChanged(this,this.visible))},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"page"},Object.defineProperty(n.prototype,"isVisible",{get:function(){if(!this.visible)return!1;for(var e=0;e<this.questions.length;e++)if(this.questions[e].visible)return!0;return!1},enumerable:!0,configurable:!0}),n.prototype.addQuestion=function(e,t){void 0===t&&(t=-1),null!=e&&(0>t||t>=this.questions.length?this.questions.push(e):this.questions.splice(t,0,e),null!=this.data&&(e.setData(this.data),this.data.questionAdded(e,t)))},n.prototype.addNewQuestion=function(t,n){var o=e.QuestionFactory.Instance.createQuestion(t,n);return this.addQuestion(o),o},n.prototype.removeQuestion=function(e){var t=this.questions.indexOf(e);0>t||(this.questions.splice(t,1),null!=this.data&&this.data.questionRemoved(e))},n.prototype.hasErrors=function(){for(var e=!1,t=0;t<this.questions.length;t++)this.questions[t].visible&&this.questions[t].hasErrors()&&(e=!0);return e},n.prototype.addQuestionsToList=function(e,t){if(void 0===t&&(t=!1),!t||this.visible)for(var n=0;n<this.questions.length;n++)t&&!this.questions[n].visible||e.push(this.questions[n])},n.prototype.onNumChanged=function(e){},n}(e.Base);e.PageModel=t,e.JsonObject.metaData.addClass("page",["name","questions","visible:boolean","title"],function(){return new t}),e.JsonObject.metaData.setPropertyValues("page","visible",null,!0),e.JsonObject.metaData.setPropertyClassInfo("page","questions","question")}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(){function e(e,t){void 0===t&&(t=null),this.value=e,this.error=t}return e}();e.ValidatorResult=t;var n=function(e){function t(){e.call(this),this.text=""}return __extends(t,e),t.prototype.getErrorText=function(e){return this.text?this.text:this.getDefaultErrorText(e)},t.prototype.getDefaultErrorText=function(e){return""},t.prototype.validate=function(e,t){return void 0===t&&(t=null),null},t}(e.Base);e.SurveyValidator=n;var o=function(){function e(){}return e.prototype.run=function(e){for(var t=0;t<e.validators.length;t++){var n=e.validators[t].validate(e.value,e.getValidatorTitle());if(null!=n){if(n.error)return n.error;n.value&&(e.value=n.value)}}return null},e}();e.ValidatorRunner=o;var r=function(n){function o(e,t){void 0===e&&(e=null),void 0===t&&(t=null),n.call(this),this.minValue=e,this.maxValue=t}return __extends(o,n),o.prototype.getType=function(){return"numericvalidator"},o.prototype.validate=function(n,o){if(void 0===o&&(o=null),!n||!this.isNumber(n))return new t(null,new e.RequreNumericError);var r=new t(parseFloat(n));return this.minValue&&this.minValue>r.value?(r.error=new e.CustomError(this.getErrorText(o)),r):this.maxValue&&this.maxValue<r.value?(r.error=new e.CustomError(this.getErrorText(o)),r):"number"==typeof n?null:r},o.prototype.getDefaultErrorText=function(t){var n=t?t:"value";return this.minValue&&this.maxValue?e.surveyLocalization.getString("numericMinMax").format(n,this.minValue,this.maxValue):this.minValue?e.surveyLocalization.getString("numericMin").format(n,this.minValue):e.surveyLocalization.getString("numericMax").format(n,this.maxValue)},o.prototype.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},o}(n);e.NumericValidator=r;var i=function(n){function o(e){void 0===e&&(e=0),n.call(this),this.minLength=e}return __extends(o,n),o.prototype.getType=function(){return"textvalidator"},o.prototype.validate=function(n,o){return void 0===o&&(o=null),this.minLength<=0?void 0:n.length<this.minLength?new t(null,new e.CustomError(this.getErrorText(o))):null},o.prototype.getDefaultErrorText=function(t){return e.surveyLocalization.getString("textMinLength").format(this.minLength)},o}(n);e.TextValidator=i;var s=function(n){function o(e,t){void 0===e&&(e=null),void 0===t&&(t=null),n.call(this),this.minCount=e,this.maxCount=t}return __extends(o,n),o.prototype.getType=function(){return"answercountvalidator"},o.prototype.validate=function(n,o){if(void 0===o&&(o=null),null==n||n.constructor!=Array)return null;var r=n.length;return this.minCount&&r<this.minCount?new t(null,new e.CustomError(this.getErrorText(e.surveyLocalization.getString("minSelectError").format(this.minCount)))):this.maxCount&&r>this.maxCount?new t(null,new e.CustomError(this.getErrorText(e.surveyLocalization.getString("maxSelectError").format(this.maxCount)))):null},o.prototype.getDefaultErrorText=function(e){return e},o}(n);e.AnswerCountValidator=s;var a=function(n){function o(e){void 0===e&&(e=null),n.call(this),this.regex=e}return __extends(o,n),o.prototype.getType=function(){return"regexvalidator"},o.prototype.validate=function(n,o){if(void 0===o&&(o=null),!this.regex||!n)return null;var r=new RegExp(this.regex);return r.test(n)?null:new t(n,new e.CustomError(this.getErrorText(o)))},o}(n);e.RegexValidator=a;var u=function(n){function o(){n.call(this),this.re=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i}return __extends(o,n),o.prototype.getType=function(){return"emailvalidator"},o.prototype.validate=function(n,o){return void 0===o&&(o=null),n?this.re.test(n)?null:new t(n,new e.CustomError(this.getErrorText(o))):null},o.prototype.getDefaultErrorText=function(t){return e.surveyLocalization.getString("invalidEmail")},o}(n);e.EmailValidator=u,e.JsonObject.metaData.addClass("surveyvalidator",["text"]),e.JsonObject.metaData.addClass("numericvalidator",["minValue:number","maxValue:number"],function(){return new r},"surveyvalidator"),e.JsonObject.metaData.addClass("textvalidator",["minLength:number"],function(){return new i},"surveyvalidator"),e.JsonObject.metaData.addClass("answercountvalidator",["minCount:number","maxCount:number"],function(){return new s},"surveyvalidator"),e.JsonObject.metaData.addClass("regexvalidator",["regex"],function(){return new a},"surveyvalidator"),e.JsonObject.metaData.addClass("emailvalidator",[],function(){return new u},"surveyvalidator")}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(e){t.call(this,e),this.name=e,this.titleValue=null,this.isRequiredValue=!1,this.hasCommentValue=!1,this.hasOtherValue=!1,this.errors=[],this.validators=new Array,this.isValueChangedInSurvey=!1}return __extends(n,t),Object.defineProperty(n.prototype,"hasTitle",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this.titleValue?this.titleValue:this.name},set:function(e){this.titleValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"processedTitle",{get:function(){return null!=this.data?this.data.processText(this.title):this.title},enumerable:!0,configurable:!0}),n.prototype.supportComment=function(){return!1},n.prototype.supportOther=function(){return!1},Object.defineProperty(n.prototype,"isRequired",{get:function(){return this.isRequiredValue},set:function(e){this.isRequiredValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasComment",{get:function(){return this.hasCommentValue},set:function(e){this.supportComment()&&(this.hasCommentValue=e,this.hasComment&&(this.hasOther=!1))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasOther",{get:function(){return this.hasOtherValue},set:function(e){this.supportOther()&&(this.hasOtherValue=e,this.hasOther&&(this.hasComment=!1))},enumerable:!0,configurable:!0}),n.prototype.onSetData=function(){t.prototype.onSetData.call(this),this.onSurveyValueChanged(this.value)},Object.defineProperty(n.prototype,"value",{get:function(){return null!=this.data?this.data.getValue(this.name):this.questionValue},set:function(e){this.setNewValue(e),this.fireCallback(this.valueChangedCallback)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"comment",{get:function(){return null!=this.data?this.data.getComment(this.name):""},set:function(e){this.setNewComment(e),this.fireCallback(this.commentChangedCallback)},enumerable:!0,configurable:!0}),n.prototype.isEmpty=function(){return null==this.value},n.prototype.hasErrors=function(){return this.checkForErrors(),this.errors.length>0},Object.defineProperty(n.prototype,"requiredText",{get:function(){return null!=this.data?this.data.requiredText:""},enumerable:!0,configurable:!0}),n.prototype.checkForErrors=function(){var e=this.errors?this.errors.length:0;if(this.errors=[],this.onCheckForErrors(this.errors),0==this.errors.length){var t=this.runValidators();t&&this.errors.push(t)}if(this.data&&0==this.errors.length){var t=this.data.validateQuestion(this.name);t&&this.errors.push(t)}(e!=this.errors.length||e>0)&&this.fireCallback(this.errorsChangedCallback)},n.prototype.onCheckForErrors=function(t){this.isRequired&&this.isEmpty()&&this.errors.push(new e.AnswerRequiredError)},n.prototype.runValidators=function(){return(new e.ValidatorRunner).run(this)},n.prototype.setNewValue=function(e){this.isValueChangedInSurvey||null==this.data||this.data.setValue(this.name,e),this.questionValue=e,this.onValueChanged()},n.prototype.onValueChanged=function(){},n.prototype.setNewComment=function(e){null!=this.data&&this.data.setComment(this.name,e)},n.prototype.onSurveyValueChanged=function(e){this.isValueChangedInSurvey=!0,this.value=e,this.isValueChangedInSurvey=!1},n.prototype.getValidatorTitle=function(){return null},n}(e.QuestionBase);e.Question=t,e.JsonObject.metaData.addClass("question",["title","isRequired:boolean","validators:validators"],null,"questionbase"),e.JsonObject.metaData.setPropertyValues("question","title",null,null,function(e){return e.titleValue}),e.JsonObject.metaData.setPropertyClassInfo("question","validators","surveyvalidator","validator")}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(n){t.call(this,n),this.otherItem=new e.ItemValue("other",e.surveyLocalization.getString("otherItemText")),this.choicesValues=new Array,this.otherErrorText=null,this.choicesOrderValue="none"}return __extends(n,t),Object.defineProperty(n.prototype,"isOtherSelected",{get:function(){return this.value==this.otherItem.value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"choices",{get:function(){return this.choicesValues},set:function(t){e.ItemValue.setData(this.choicesValues,t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"choicesOrder",{get:function(){return this.choicesOrderValue},set:function(e){e!=this.choicesOrderValue&&(this.choicesOrderValue=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"otherText",{get:function(){return this.otherItem.text},set:function(e){this.otherItem.text=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visibleChoices",{get:function(){if(!this.hasOther&&"none"==this.choicesOrder)return this.choices;var e=this.sortVisibleChoices(this.choices.slice());return this.hasOther&&e.push(this.otherItem),e},enumerable:!0,configurable:!0}),n.prototype.supportComment=function(){return!0},n.prototype.supportOther=function(){return!0},n.prototype.onCheckForErrors=function(n){if(t.prototype.onCheckForErrors.call(this,n),this.isOtherSelected&&!this.comment){var o=this.otherErrorText;o||(o="Please enter the others value."),n.push(new e.CustomError(o))}},n.prototype.sortVisibleChoices=function(e){var t=this.choicesOrder.toLowerCase();return"asc"==t?this.sortArray(e,1):"desc"==t?this.sortArray(e,-1):"random"==t?this.randomizeArray(e):e},n.prototype.sortArray=function(e,t){return e.sort(function(e,n){return e.text<n.text?-1*t:e.text>n.text?1*t:0})},n.prototype.randomizeArray=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),o=e[t];e[t]=e[n],e[n]=o}return e},n}(e.Question);e.QuestionSelectBase=t;var n=function(e){function t(t){e.call(this,t),this.name=t,this.colCountValue=1}return __extends(t,e),Object.defineProperty(t.prototype,"colCount",{get:function(){return this.colCountValue},set:function(e){0>e||e>4||(this.colCountValue=e,this.fireCallback(this.colCountChangedCallback))},enumerable:!0,configurable:!0}),t}(t);e.QuestionCheckboxBase=n,e.JsonObject.metaData.addClass("selectbase",["hasComment:boolean","hasOther:boolean","!choices:itemvalues","choicesOrder","otherText","otherErrorText"],null,"question"),e.JsonObject.metaData.setPropertyValues("selectbase","choices",null,null,function(t){return e.ItemValue.getData(t.choices)},function(t,n){e.ItemValue.setData(t.choices,n)}),e.JsonObject.metaData.setPropertyValues("selectbase","choicesOrder",null,"none"),e.JsonObject.metaData.setPropertyChoices("selectbase","choicesOrder",["none","asc","desc","random"]),e.JsonObject.metaData.setPropertyValues("selectbase","otherText",null,e.surveyLocalization.getString("otherItemText")),e.JsonObject.metaData.addClass("checkboxbase",["colCount:number"],null,"selectbase"),e.JsonObject.metaData.setPropertyValues("checkboxbase","colCount",null,1),e.JsonObject.metaData.setPropertyChoices("checkboxbase","colCount",[0,1,2,3,4])}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t){e.call(this,t),this.name=t}return __extends(t,e),Object.defineProperty(t.prototype,"isOtherSelected",{
get:function(){return this.value?this.value.indexOf(this.otherItem.value)>=0:!1},enumerable:!0,configurable:!0}),t.prototype.getType=function(){return"checkbox"},t}(e.QuestionCheckboxBase);e.QuestionCheckboxModel=t,e.JsonObject.metaData.addClass("checkbox",[],function(){return new t("")},"checkboxbase"),e.QuestionFactory.Instance.registerQuestion("checkbox",function(n){var o=new t(n);return o.choices=e.QuestionFactory.DefaultChoices,o})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t){e.call(this,t),this.name=t,this.rows=4,this.cols=50}return __extends(t,e),t.prototype.getType=function(){return"comment"},t.prototype.isEmpty=function(){return e.prototype.isEmpty.call(this)||""==this.value},t}(e.Question);e.QuestionCommentModel=t,e.JsonObject.metaData.addClass("comment",["cols:number","rows:number"],function(){return new t("")},"question"),e.JsonObject.metaData.setPropertyValues("comment","cols",null,50),e.JsonObject.metaData.setPropertyValues("comment","rows",null,4),e.QuestionFactory.Instance.registerQuestion("comment",function(e){return new t(e)})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(e){t.call(this,e),this.name=e}return __extends(n,t),Object.defineProperty(n.prototype,"optionsCaption",{get:function(){return this.optionsCaptionValue?this.optionsCaptionValue:e.surveyLocalization.getString("optionsCaption")},set:function(e){this.optionsCaptionValue=e},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"dropdown"},n}(e.QuestionSelectBase);e.QuestionDropdownModel=t,e.JsonObject.metaData.addClass("dropdown",["optionsCaption"],function(){return new t("")},"selectbase"),e.JsonObject.metaData.setPropertyValues("dropdown","optionsCaption",null,null,function(e){return e.optionsCaptionValue}),e.QuestionFactory.Instance.registerQuestion("dropdown",function(n){var o=new t(n);return o.choices=e.QuestionFactory.DefaultChoices,o})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t){e.call(this,t),this.name=t}return __extends(t,e),t.prototype.getType=function(){return"html"},Object.defineProperty(t.prototype,"html",{get:function(){return this.htmlValue},set:function(e){this.htmlValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"processedHtml",{get:function(){return this.data?this.data.processHtml(this.html):this.html},enumerable:!0,configurable:!0}),t}(e.QuestionBase);e.QuestionHtmlModel=t,e.JsonObject.metaData.addClass("html",["html:html"],function(){return new t("")},"questionbase"),e.QuestionFactory.Instance.registerQuestion("html",function(e){return new t(e)})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t,n,o,r,i){e.call(this),this.name=t,this.text=n,this.fullName=o,this.data=r,this.rowValue=i}return __extends(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.rowValue},set:function(e){this.rowValue=e,this.data&&this.data.onMatrixRowChanged(this),this.onValueChanged()},enumerable:!0,configurable:!0}),t.prototype.onValueChanged=function(){},t}(e.Base);e.MatrixRowModel=t;var n=function(n){function o(e){n.call(this,e),this.name=e,this.columnsValue=[],this.rowsValue=[],this.isRowChanging=!1}return __extends(o,n),o.prototype.getType=function(){return"matrix"},Object.defineProperty(o.prototype,"hasRows",{get:function(){return this.rowsValue.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columns",{get:function(){return this.columnsValue},set:function(t){e.ItemValue.setData(this.columnsValue,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rows",{get:function(){return this.rowsValue},set:function(t){e.ItemValue.setData(this.rowsValue,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"visibleRows",{get:function(){var e=new Array,t=this.value;t||(t={});for(var n=0;n<this.rows.length;n++)this.rows[n].value&&e.push(this.createMatrixRow(this.rows[n].value,this.rows[n].text,this.name+"_"+this.rows[n].value.toString(),t[this.rows[n].value]));return 0==e.length&&e.push(this.createMatrixRow(null,"",this.name,t)),this.generatedVisibleRows=e,e},enumerable:!0,configurable:!0}),o.prototype.createMatrixRow=function(e,n,o,r){return new t(e,n,o,this,r)},o.prototype.onValueChanged=function(){if(!this.isRowChanging&&this.generatedVisibleRows&&0!=this.generatedVisibleRows.length){this.isRowChanging=!0;var e=this.value;if(e||(e={}),0==this.rows.length)this.generatedVisibleRows[0].value=e;else for(var t=0;t<this.generatedVisibleRows.length;t++){var n=this.generatedVisibleRows[t],o=e[n.name]?e[n.name]:null;this.generatedVisibleRows[t].value=o}this.isRowChanging=!1}},o.prototype.onMatrixRowChanged=function(e){if(!this.isRowChanging){if(this.isRowChanging=!0,this.hasRows){var t=this.value;t||(t={}),t[e.name]=e.value,this.setNewValue(t)}else this.setNewValue(e.value);this.isRowChanging=!1}},o}(e.Question);e.QuestionMatrixModel=n,e.JsonObject.metaData.addClass("matrix",["columns:itemvalues","rows:itemvalues"],function(){return new n("")},"question"),e.JsonObject.metaData.setPropertyValues("matrix","columns",null,null,function(t){return e.ItemValue.getData(t.columns)},function(e,t){e.columns=t}),e.JsonObject.metaData.setPropertyValues("matrix","rows",null,null,function(t){return e.ItemValue.getData(t.rows)},function(e,t){e.rows=t}),e.QuestionFactory.Instance.registerQuestion("matrix",function(e){var t=new n(e);return t.rows=["Row 1","Row 2"],t.columns=["Column 1","Column 2","Column 3"],t})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(e,n){void 0===n&&(n=null),t.call(this),this.name=e,this.choicesValue=[]}return __extends(n,t),n.prototype.getType=function(){return"matrixdropdowncolumn"},Object.defineProperty(n.prototype,"title",{get:function(){return this.titleValue?this.titleValue:this.name},set:function(e){this.titleValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"choices",{get:function(){return this.choicesValue},set:function(t){e.ItemValue.setData(this.choicesValue,t)},enumerable:!0,configurable:!0}),n}(e.Base);e.MatrixDropdownColumn=t;var n=function(){function e(e,t,n,o){this.column=e,this.row=t,this.data=n,this.cellValue=o}return Object.defineProperty(e.prototype,"choices",{get:function(){return this.column.choices&&this.column.choices.length>0?this.column.choices:this.data.choices},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"optionsCaption",{get:function(){return this.column.optionsCaption?this.column.optionsCaption:this.data.optionsCaption},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.cellValue},set:function(e){this.cellValue=e,this.data.onCellChanged(this),this.onValueChanged()},enumerable:!0,configurable:!0}),e.prototype.onValueChanged=function(){},e}();e.MatrixDropdownCellModel=n;var o=function(){function e(e,t,n,o){this.name=e,this.text=t,this.cells=[],this.data=n,this.rowValue=o,this.buildCells()}return Object.defineProperty(e.prototype,"value",{get:function(){return this.rowValue},set:function(e){this.rowValue=e;for(var t=0;t<this.cells.length;t++)this.cells[t].value=this.getCellValue(this.cells[t].column)},enumerable:!0,configurable:!0}),e.prototype.buildCells=function(){for(var e=this.data.columns,t=0;t<e.length;t++){var n=e[t];this.cells.push(this.createCell(n,this.getCellValue(n)))}},e.prototype.createCell=function(e,t){return new n(e,this,this.data,t)},e.prototype.getCellValue=function(e){return this.rowValue?this.rowValue[e.name]:null},e}();e.MatrixDropdownRowModel=o;var r=function(n){function r(e){n.call(this,e),this.name=e,this.columnsValue=[],this.rowsValue=[],this.choicesValue=[],this.isRowChanging=!1}return __extends(r,n),r.prototype.getType=function(){return"matrixdropdown"},Object.defineProperty(r.prototype,"columns",{get:function(){return this.columnsValue},set:function(e){this.columnsValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rows",{get:function(){return this.rowsValue},set:function(t){e.ItemValue.setData(this.rowsValue,t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"choices",{get:function(){return this.choicesValue},set:function(t){e.ItemValue.setData(this.choicesValue,t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"optionsCaption",{get:function(){return this.optionsCaptionValue?this.optionsCaptionValue:e.surveyLocalization.getString("optionsCaption")},set:function(e){this.optionsCaptionValue=e},enumerable:!0,configurable:!0}),r.prototype.addColumn=function(e,n){void 0===n&&(n=null);var o=new t(e,n);return this.columnsValue.push(o),o},Object.defineProperty(r.prototype,"visibleRows",{get:function(){var e=new Array;if(!this.rows||0===this.rows.length)return e;var t=this.value;t||(t={});for(var n=0;n<this.rows.length;n++)this.rows[n].value&&e.push(this.createMatrixRow(this.rows[n].value,this.rows[n].text,t[this.rows[n].value]));return this.generatedVisibleRows=e,e},enumerable:!0,configurable:!0}),r.prototype.createMatrixRow=function(e,t,n){return new o(e,t,this,n)},r.prototype.onValueChanged=function(){if(!this.isRowChanging&&this.generatedVisibleRows&&0!=this.generatedVisibleRows.length){this.isRowChanging=!0;var e=this.value;e||(e={});for(var t=0;t<this.generatedVisibleRows.length;t++){var n=this.generatedVisibleRows[t],o=e[n.name]?e[n.name]:null;this.generatedVisibleRows[t].value=o}this.isRowChanging=!1}},r.prototype.onCellChanged=function(e){var t=this.value;t||(t={});var n=t[e.row.name];n||(n={},t[e.row.name]=n),e.value?n[e.column.name]=e.value:(delete n[e.column.name],0==Object.keys(n).length&&(delete t[e.row.name],0==Object.keys(t).length&&(t=null))),this.isRowChanging=!0,this.setNewValue(t),this.isRowChanging=!1},r}(e.Question);e.QuestionMatrixDropdownModel=r,e.JsonObject.metaData.addClass("matrixdropdowncolumn",["name","title","choices:itemvalues","optionsCaption"],function(){return new t("")}),e.JsonObject.metaData.setPropertyValues("matrixdropdowncolumn","title",null,null,function(e){return e.titleValue}),e.JsonObject.metaData.setPropertyValues("matrixdropdowncolumn","choices",null,null,function(t){return e.ItemValue.getData(t.choices)},function(e,t){e.choices=t}),e.JsonObject.metaData.addClass("matrixdropdown",["columns:matrixdropdowncolumns","rows:itemvalues","choices:itemvalues","optionsCaption"],function(){return new r("")},"question"),e.JsonObject.metaData.setPropertyValues("matrixdropdown","columns","matrixdropdowncolumn"),e.JsonObject.metaData.setPropertyValues("matrixdropdown","choices",null,null,function(t){return e.ItemValue.getData(t.choices)},function(e,t){e.choices=t}),e.JsonObject.metaData.setPropertyValues("matrixdropdown","rows",null,null,function(t){return e.ItemValue.getData(t.rows)},function(e,t){e.rows=t}),e.JsonObject.metaData.setPropertyValues("matrixdropdown","optionsCaption",null,null,function(e){return e.optionsCaptionValue}),e.QuestionFactory.Instance.registerQuestion("matrixdropdown",function(e){var t=new r(e);return t.choices=[1,2,3,4,5],t.rows=["Row 1","Row 2"],t.addColumn("Column 1"),t.addColumn("Column 2"),t.addColumn("Column 3"),t})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null),e.call(this),this.name=t,this.validators=new Array,this.title=n}return __extends(t,e),t.prototype.getType=function(){return"multipletextitem"},t.prototype.setData=function(e){this.data=e},Object.defineProperty(t.prototype,"title",{get:function(){return this.titleValue?this.titleValue:this.name},set:function(e){this.titleValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.data?this.data.getMultipleTextValue(this.name):null},set:function(e){null!=this.data&&this.data.setMultipleTextValue(this.name,e)},enumerable:!0,configurable:!0}),t.prototype.onValueChanged=function(e){},t.prototype.getValidatorTitle=function(){return this.title},t}(e.Base);e.MultipleTextItemModel=t;var n=function(n){function o(e){n.call(this,e),this.name=e,this.colCountValue=1,this.itemSize=25,this.itemsValues=new Array,this.isMultipleItemValueChanging=!1;var t=this;this.items.push=function(e){e.setData(t);var n=Array.prototype.push.call(this,e);return t.fireCallback(t.colCountChangedCallback),n}}return __extends(o,n),o.prototype.getType=function(){return"multipletext"},Object.defineProperty(o.prototype,"items",{get:function(){return this.itemsValues},set:function(e){this.itemsValues=e,this.fireCallback(this.colCountChangedCallback)},enumerable:!0,configurable:!0}),o.prototype.AddItem=function(e,t){void 0===t&&(t=null);var n=this.createTextItem(e,t);return this.items.push(n),n},Object.defineProperty(o.prototype,"colCount",{get:function(){return this.colCountValue},set:function(e){1>e||e>4||(this.colCountValue=e,this.fireCallback(this.colCountChangedCallback))},enumerable:!0,configurable:!0}),o.prototype.getRows=function(){for(var e=this.colCount,t=this.items,n=[],o=0,r=0;r<t.length;r++)0==o&&n.push([]),n[n.length-1].push(t[r]),o++,o>=e&&(o=0);return n},o.prototype.onValueChanged=function(){n.prototype.onValueChanged.call(this),this.onItemValueChanged()},o.prototype.createTextItem=function(e,n){return new t(e,n)},o.prototype.onItemValueChanged=function(){if(!this.isMultipleItemValueChanging)for(var e=0;e<this.items.length;e++){var t=null;this.value&&this.items[e].name in this.value&&(t=this.value[this.items[e].name]),this.items[e].onValueChanged(t)}},o.prototype.runValidators=function(){var t=n.prototype.runValidators.call(this);if(null!=t)return t;for(var o=0;o<this.items.length;o++)if(t=(new e.ValidatorRunner).run(this.items[o]),null!=t)return t;return null},o.prototype.getMultipleTextValue=function(e){return this.value?this.value[e]:null},o.prototype.setMultipleTextValue=function(e,t){this.isMultipleItemValueChanging=!0;var n=this.value;n||(n={}),n[e]=t,this.setNewValue(n),this.isMultipleItemValueChanging=!1},o}(e.Question);e.QuestionMultipleTextModel=n,e.JsonObject.metaData.addClass("multipletextitem",["name","title","validators:validators"],function(){return new t("")}),e.JsonObject.metaData.setPropertyClassInfo("multipletextitem","validators","surveyvalidator","validator"),e.JsonObject.metaData.setPropertyValues("multipletextitem","title",null,null,function(e){return e.titleValue}),e.JsonObject.metaData.addClass("multipletext",["!items:textitems","itemSize:number","colCount:number"],function(){return new n("")},"question"),e.JsonObject.metaData.setPropertyValues("multipletext","items","multipletextitem"),e.JsonObject.metaData.setPropertyValues("multipletext","itemSize",null,25),e.JsonObject.metaData.setPropertyValues("multipletext","colCount",null,1),e.JsonObject.metaData.setPropertyChoices("multipletext","colCount",[1,2,3,4]),e.QuestionFactory.Instance.registerQuestion("multipletext",function(e){var t=new n(e);return t.AddItem("text1"),t.AddItem("text2"),t})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t){e.call(this,t),this.name=t}return __extends(t,e),t.prototype.getType=function(){return"radiogroup"},t}(e.QuestionCheckboxBase);e.QuestionRadiogroupModel=t,e.JsonObject.metaData.addClass("radiogroup",[],function(){return new t("")},"checkboxbase"),e.QuestionFactory.Instance.registerQuestion("radiogroup",function(n){var o=new t(n);return o.choices=e.QuestionFactory.DefaultChoices,o})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(e){t.call(this,e),this.name=e,this.rates=[],this.mininumRateDescription=null,this.maximumRateDescription=null}return __extends(n,t),Object.defineProperty(n.prototype,"rateValues",{get:function(){return this.rates},set:function(t){e.ItemValue.setData(this.rates,t),this.fireCallback(this.rateValuesChangedCallback)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visibleRateValues",{get:function(){return this.rateValues.length>0?this.rateValues:n.defaultRateValues},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"rating"},n.prototype.supportComment=function(){return!0},n.prototype.supportOther=function(){return!0},n.defaultRateValues=[],n}(e.Question);e.QuestionRatingModel=t,e.ItemValue.setData(t.defaultRateValues,[1,2,3,4,5]),e.JsonObject.metaData.addClass("rating",["hasComment:boolean","rateValues:itemvalues","mininumRateDescription","maximumRateDescription"],function(){return new t("")},"question"),e.JsonObject.metaData.setPropertyValues("rating","rateValues",null,null,function(t){return e.ItemValue.getData(t.rateValues)},function(e,t){e.rateValues=t}),e.QuestionFactory.Instance.registerQuestion("rating",function(e){return new t(e)})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t){e.call(this,t),this.name=t,this.size=25}return __extends(t,e),t.prototype.getType=function(){return"text"},t.prototype.isEmpty=function(){return e.prototype.isEmpty.call(this)||""==this.value},t}(e.Question);e.QuestionTextModel=t,e.JsonObject.metaData.addClass("text",["size:number"],function(){return new t("")},"question"),e.JsonObject.metaData.setPropertyValues("text","size",null,25),e.QuestionFactory.Instance.registerQuestion("text",function(e){return new t(e)})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(){e.call(this),this.opValue="equal"}return __extends(t,e),Object.defineProperty(t,"operators",{get:function(){return null!=t.operatorsValue?t.operatorsValue:(t.operatorsValue={empty:function(e,t){return!e},notempty:function(e,t){return!!e},equal:function(e,t){return e==t},notequal:function(e,t){return e!=t},contains:function(e,t){return e&&e.indexOf&&e.indexOf(t)>-1},notcontains:function(e,t){return!e||!e.indexOf||-1==e.indexOf(t)},greater:function(e,t){return e>t},less:function(e,t){return t>e},greaterorequal:function(e,t){return e>=t},lessorequal:function(e,t){return t>=e}},t.operatorsValue)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"operator",{get:function(){return this.opValue},set:function(e){e&&(e=e.toLowerCase(),t.operators[e]&&(this.opValue=e))},enumerable:!0,configurable:!0}),t.prototype.check=function(e){t.operators[this.operator](e,this.value)?this.onSuccess():this.onFailure()},t.prototype.onSuccess=function(){},t.prototype.onFailure=function(){},t.operatorsValue=null,t}(e.Base);e.Trigger=t;var n=function(e){function t(){e.call(this),this.owner=null}return __extends(t,e),t.prototype.setOwner=function(e){this.owner=e},Object.defineProperty(t.prototype,"isOnNextPage",{get:function(){return!1},enumerable:!0,configurable:!0}),t}(t);e.SurveyTrigger=n;var o=function(e){function t(){e.call(this),this.pages=[],this.questions=[]}return __extends(t,e),t.prototype.getType=function(){return"visibletrigger"},t.prototype.onSuccess=function(){this.onTrigger(this.onItemSuccess)},t.prototype.onFailure=function(){this.onTrigger(this.onItemFailure)},t.prototype.onTrigger=function(e){if(this.owner)for(var t=this.owner.getObjects(this.pages,this.questions),n=0;n<t.length;n++)e(t[n])},t.prototype.onItemSuccess=function(e){e.visible=!0},t.prototype.onItemFailure=function(e){e.visible=!1},t}(n);e.SurveyTriggerVisible=o;var r=function(e){function t(){e.call(this)}return __extends(t,e),t.prototype.getType=function(){return"completetrigger"},Object.defineProperty(t.prototype,"isOnNextPage",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.onSuccess=function(){this.owner&&this.owner.doComplete()},t}(n);e.SurveyTriggerComplete=r;var i=function(e){function t(){e.call(this)}return __extends(t,e),t.prototype.getType=function(){return"setvaluetrigger"},t.prototype.onSuccess=function(){this.setToName&&this.owner&&this.owner.setTriggerValue(this.setToName,this.setValue,this.isVariable)},t}(n);e.SurveyTriggerSetValue=i,e.JsonObject.metaData.addClass("trigger",["operator","!value"]),e.JsonObject.metaData.addClass("surveytrigger",["!name"],null,"trigger"),e.JsonObject.metaData.addClass("visibletrigger",["pages","questions"],function(){return new o},"surveytrigger"),e.JsonObject.metaData.addClass("completetrigger",[],function(){return new r},"surveytrigger"),e.JsonObject.metaData.addClass("setvaluetrigger",["!setToName","setValue","isVariable:boolean"],function(){return new i},"surveytrigger")}(Survey||(Survey={}));var Survey;!function(e){var t=function(){function e(){}return e}(),n=function(){function e(){}return e.prototype.process=function(e){if(!e)return e;if(!this.onProcess)return e;for(var t=this.getItems(e),n=t.length-1;n>=0;n--){var o=t[n],r=this.getName(e.substring(o.start+1,o.end));if(this.canProcessName(r)&&(!this.onHasValue||this.onHasValue(r))){var i=this.onProcess(r);null==i&&(i=""),e=e.substr(0,o.start)+i+e.substr(o.end+1)}}return e},e.prototype.getItems=function(e){for(var n=[],o=e.length,r=-1,i="",s=0;o>s;s++)if(i=e[s],"{"==i&&(r=s),"}"==i){if(r>-1){var a=new t;a.start=r,a.end=s,n.push(a)}r=-1}return n},e.prototype.getName=function(e){return e?e.trim():void 0},e.prototype.canProcessName=function(e){if(!e)return!1;for(var t=0;t<e.length;t++){var n=e[t];if(" "==n||"-"==n||"&"==n)return!1}return!0},e}();e.TextPreProcessor=n}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(n){void 0===n&&(n=null),t.call(this),this.surveyId=null,this.surveyPostId=null,this.clientId=null,this.cookieName=null,this.sendResultOnPageNext=!1,this.commentPrefix="-Comment",this.title="",this.showNavigationButtons=!0,this.showTitle=!0,this.showPageTitles=!0,this.completedHtml="",this.requiredText="* ",this.showProgressBar="off",this.pages=new Array,this.triggers=new Array,this.currentPageValue=null,this.valuesHash={},this.variablesHash={},this.showPageNumbersValue=!1,this.showQuestionNumbersValue="on",this.localeValue="",this.isCompleted=!1,this.isLoading=!1,this.processedTextValues={},this.onComplete=new e.Event,this.onCurrentPageChanged=new e.Event,this.onValueChanged=new e.Event,this.onVisibleChanged=new e.Event,this.onPageVisibleChanged=new e.Event,this.onQuestionAdded=new e.Event,this.onQuestionRemoved=new e.Event,this.onValidateQuestion=new e.Event,this.onProcessHtml=new e.Event,this.onSendResult=new e.Event,this.onGetResult=new e.Event,this.jsonErrors=null,this.mode="normal";var o=this;this.textPreProcessor=new e.TextPreProcessor,this.textPreProcessor.onHasValue=function(e){return o.processedTextValues[e.toLowerCase()]},this.textPreProcessor.onProcess=function(e){return o.getProcessedTextValue(e)},this.pages.push=function(e){return e.data=o,Array.prototype.push.call(this,e)},this.triggers.push=function(e){return e.setOwner(o),Array.prototype.push.call(this,e)},this.updateProcessedTextValues(),this.onBeforeCreating(),n&&(this.setJsonObject(n),this.surveyId&&this.loadSurveyFromService(this.surveyId)),this.onCreating()}return __extends(n,t),n.prototype.getType=function(){return"survey"},Object.defineProperty(n.prototype,"locale",{get:function(){return this.localeValue},set:function(t){this.localeValue=t,e.surveyLocalization.currentLocale=t},enumerable:!0,configurable:!0}),n.prototype.getLocString=function(t){return e.surveyLocalization.getString(t)},Object.defineProperty(n.prototype,"emptySurveyText",{get:function(){return this.getLocString("emptySurvey")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pagePrevText",{get:function(){return this.pagePrevTextValue?this.pagePrevTextValue:this.getLocString("pagePrevText")},set:function(e){this.pagePrevTextValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pageNextText",{get:function(){return this.pageNextTextValue?this.pageNextTextValue:this.getLocString("pageNextText")},set:function(e){this.pageNextTextValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"completeText",{get:function(){return this.completeTextValue?this.completeTextValue:this.getLocString("completeText")},set:function(e){this.completeTextValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"showPageNumbers",{get:function(){return this.showPageNumbersValue},set:function(e){e!==this.showPageNumbers&&(this.showPageNumbersValue=e,this.updateVisibleIndexes())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"showQuestionNumbers",{get:function(){return this.showQuestionNumbersValue},set:function(e){e!==this.showQuestionNumbers&&(this.showQuestionNumbersValue=e,this.updateVisibleIndexes())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"data",{get:function(){var e={};for(var t in this.valuesHash)e[t]=this.valuesHash[t];return e},set:function(e){if(this.valuesHash={},e)for(var t in e)this.valuesHash[t]=e[t],this.checkTriggers(t,e[t],!1);this.notifyAllQuestionsOnValueChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"comments",{get:function(){var e={};for(var t in this.valuesHash)t.indexOf(this.commentPrefix)>0&&(e[t]=this.valuesHash[t]);return e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visiblePages",{get:function(){if(this.isDesignMode)return this.pages;for(var e=new Array,t=0;t<this.pages.length;t++)this.pages[t].isVisible&&e.push(this.pages[t]);return e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isEmpty",{get:function(){return 0==this.pages.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"PageCount",{get:function(){return this.pages.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visiblePageCount",{get:function(){return this.visiblePages.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentPage",{get:function(){var e=this.visiblePages;return null!=this.currentPageValue&&e.indexOf(this.currentPageValue)<0&&(this.currentPage=null),null==this.currentPageValue&&e.length>0&&(this.currentPage=e[0]),this.currentPageValue},set:function(e){var t=this.visiblePages;if(!(null!=e&&t.indexOf(e)<0)&&e!=this.currentPageValue){var n=this.currentPageValue;this.currentPageValue=e,this.currentPageChanged(e,n)}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"state",{get:function(){return this.isLoading?"loading":this.isCompleted?"completed":this.currentPage?"running":"empty"},enumerable:!0,configurable:!0}),n.prototype.clear=function(){this.data=null,this.variablesHash={},this.isCompleted=!1,this.visiblePageCount>0&&(this.currentPage=this.visiblePages[0])},n.prototype.mergeValues=function(e,t){if(t&&e)for(var n in e){var o=e[n];o&&"object"==typeof o?(t[n]||(t[n]={}),this.mergeValues(o,t[n])):t[n]=o}},n.prototype.currentPageChanged=function(e,t){this.onCurrentPageChanged.fire(this,{oldCurrentPage:t,newCurrentPage:e})},n.prototype.getProgress=function(){if(null==this.currentPage)return 0;var e=this.visiblePages.indexOf(this.currentPage)+1;return Math.ceil(100*e/this.visiblePageCount)},Object.defineProperty(n.prototype,"isDesignMode",{get:function(){return"designer"==this.mode},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasCookie",{get:function(){if(!this.cookieName)return!1;var e=document.cookie;return e&&e.indexOf(this.cookieName+"=true")>-1},enumerable:!0,configurable:!0}),n.prototype.setCookie=function(){this.cookieName&&(document.cookie=this.cookieName+"=true; expires=Fri, 31 Dec 9999 0:0:0 GMT")},n.prototype.deleteCookie=function(){this.cookieName&&(document.cookie=this.cookieName+"=;")},n.prototype.nextPage=function(){if(this.isLastPage)return!1;if(this.isCurrentPageHasErrors)return!1;this.checkOnPageTriggers(),this.sendResultOnPageNext&&this.clientId&&this.sendResult(this.surveyPostId,this.clientId,!0);var e=this.visiblePages,t=e.indexOf(this.currentPage);return this.currentPage=e[t+1],!0},Object.defineProperty(n.prototype,"isCurrentPageHasErrors",{get:function(){return null==this.currentPage?!0:this.currentPage.hasErrors()},enumerable:!0,configurable:!0}),n.prototype.prevPage=function(){if(this.isFirstPage)return!1;var e=this.visiblePages,t=e.indexOf(this.currentPage);this.currentPage=e[t-1]},n.prototype.completeLastPage=function(){return this.isCurrentPageHasErrors?!1:(this.doComplete(),!0)},Object.defineProperty(n.prototype,"isFirstPage",{get:function(){return null==this.currentPage?!0:0==this.visiblePages.indexOf(this.currentPage)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isLastPage",{get:function(){if(null==this.currentPage)return!0;var e=this.visiblePages;return e.indexOf(this.currentPage)==e.length-1},enumerable:!0,configurable:!0}),n.prototype.doComplete=function(){this.setCookie(),this.setCompleted(),this.onComplete.fire(this,null),this.surveyPostId&&this.sendResult()},n.prototype.setCompleted=function(){this.isCompleted=!0},Object.defineProperty(n.prototype,"processedCompletedHtml",{get:function(){return this.completedHtml?this.processHtml(this.completedHtml):"<h3>"+this.getLocString("completingSurvey")+"</h3>"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"processedLoadingHtml",{get:function(){return"<h3>"+this.getLocString("loadingSurvey")+"</h3>"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"progressText",{get:function(){if(null==this.currentPage)return"";var e=this.visiblePages,t=e.indexOf(this.currentPage)+1;return this.getLocString("progressText").format(t,e.length)},enumerable:!0,configurable:!0}),n.prototype.getPage=function(e){return this.pages[e]},n.prototype.addPage=function(e){null!=e&&(this.pages.push(e),this.updateVisibleIndexes())},n.prototype.addNewPage=function(e){var t=this.createNewPage(e);return this.addPage(t),t},n.prototype.removePage=function(e){var t=this.pages.indexOf(e);0>t||(this.pages.splice(t,1),this.currentPageValue==e&&(this.currentPage=this.pages.length>0?this.pages[0]:null),this.updateVisibleIndexes())},n.prototype.getQuestionByName=function(e,t){void 0===t&&(t=!1);var n=this.getAllQuestions();t&&(e=e.toLowerCase());for(var o=0;o<n.length;o++){var r=n[o].name;if(t&&(r=r.toLowerCase()),
r==e)return n[o]}return null},n.prototype.getQuestionsByNames=function(e,t){void 0===t&&(t=!1);var n=[];if(!e)return n;for(var o=0;o<e.length;o++)if(e[o]){var r=this.getQuestionByName(e[o],t);r&&n.push(r)}return n},n.prototype.getPageByQuestion=function(e){for(var t=0;t<this.pages.length;t++){var n=this.pages[t];if(n.questions.indexOf(e)>-1)return n}return null},n.prototype.getPageByName=function(e){for(var t=0;t<this.pages.length;t++)if(this.pages[t].name==e)return this.pages[t];return null},n.prototype.getPagesByNames=function(e){var t=[];if(!e)return t;for(var n=0;n<e.length;n++)if(e[n]){var o=this.getPageByName(e[n]);o&&t.push(o)}return t},n.prototype.getAllQuestions=function(e){void 0===e&&(e=!1);for(var t=new Array,n=0;n<this.pages.length;n++)this.pages[n].addQuestionsToList(t,e);return t},n.prototype.createNewPage=function(t){return new e.PageModel(t)},n.prototype.notifyQuestionOnValueChanged=function(e,t){for(var n=this.getAllQuestions(),o=null,r=0;r<n.length;r++)n[r].name==e&&(o=n[r],this.doSurveyValueChanged(o,t));this.onValueChanged.fire(this,{name:e,question:o,value:t})},n.prototype.notifyAllQuestionsOnValueChanged=function(){for(var e=this.getAllQuestions(),t=0;t<e.length;t++)this.doSurveyValueChanged(e[t],this.getValue(e[t].name))},n.prototype.doSurveyValueChanged=function(e,t){e.onSurveyValueChanged(t)},n.prototype.checkOnPageTriggers=function(){for(var e=this.currentPage,t=0;t<e.questions.length;t++){var n=e.questions[t];if(n.visible&&n.name){var o=this.getValue(n.name);this.checkTriggers(n.name,o,!0)}}},n.prototype.checkTriggers=function(e,t,n){for(var o=0;o<this.triggers.length;o++){var r=this.triggers[o];r.name==e&&r.isOnNextPage==n&&r.check(t)}},n.prototype.sendResult=function(t,n,o){if(void 0===t&&(t=null),void 0===n&&(n=null),void 0===o&&(o=!1),!t&&this.surveyPostId&&(t=this.surveyPostId),t){n&&(this.clientId=n);var r=this;(new e.dxSurveyService).sendResult(t,this.data,function(e,t){r.onSendResult.fire(r,{success:e,response:t})},this.clientId,o)}},n.prototype.getResult=function(t,n){var o=this;(new e.dxSurveyService).getResult(t,n,function(e,t,n,r){o.onGetResult.fire(o,{success:e,data:t,dataList:n,response:r})})},n.prototype.loadSurveyFromService=function(t){void 0===t&&(t=null),t&&(this.surveyId=t);var n=this;this.isLoading=!0,this.onLoadingSurveyFromService(),(new e.dxSurveyService).loadSurvey(this.surveyId,function(e,t,o){n.isLoading=!1,e&&t&&(n.setJsonObject(t),n.notifyAllQuestionsOnValueChanged(),n.onLoadSurveyFromService())})},n.prototype.onLoadingSurveyFromService=function(){},n.prototype.onLoadSurveyFromService=function(){},n.prototype.updateVisibleIndexes=function(){if(this.updatePageVisibleIndexes(this.showPageNumbers),"onPage"==this.showQuestionNumbers)for(var e=this.visiblePages,t=0;t<e.length;t++)this.updateQuestionVisibleIndexes(e[t].questions,!0);else this.updateQuestionVisibleIndexes(this.getAllQuestions(!1),"on"==this.showQuestionNumbers)},n.prototype.updatePageVisibleIndexes=function(e){for(var t=0,n=0;n<this.pages.length;n++)this.pages[n].visibleIndex=this.pages[n].visible?t++:-1,this.pages[n].num=e&&this.pages[n].visible?this.pages[n].visibleIndex+1:-1},n.prototype.updateQuestionVisibleIndexes=function(e,t){for(var n=0,o=0;o<e.length;o++)e[o].setVisibleIndex(t&&e[o].visible&&e[o].hasTitle?n++:-1)},n.prototype.setJsonObject=function(t){if(t){this.jsonErrors=null;var n=new e.JsonObject;n.toObject(t,this),n.errors.length>0&&(this.jsonErrors=n.errors),this.updateProcessedTextValues(),this.hasCookie&&this.doComplete(),this.updateVisibleIndexes()}},n.prototype.onBeforeCreating=function(){},n.prototype.onCreating=function(){},n.prototype.updateProcessedTextValues=function(){this.processedTextValues={};var e=this;this.processedTextValues.pageno=function(t){return null!=e.currentPage?e.visiblePages.indexOf(e.currentPage)+1:0},this.processedTextValues.pagecount=function(t){return e.visiblePageCount};for(var t=this.getAllQuestions(),n=0;n<t.length;n++)this.addQuestionToProcessedTextValues(t[n])},n.prototype.addQuestionToProcessedTextValues=function(e){this.processedTextValues[e.name.toLowerCase()]="question"},n.prototype.getProcessedTextValue=function(e){var e=e.toLowerCase(),t=this.processedTextValues[e];if(!t)return null;if("question"==t){var n=this.getQuestionByName(e,!0);return null!=n?this.getValue(n.name):null}return"value"==t?this.getValue(e):"variable"==t?this.getVariable(e):t(e)},n.prototype.getVariable=function(e){return e?this.variablesHash[e]:null},n.prototype.setVariable=function(e,t){e&&(this.variablesHash[e]=t,this.processedTextValues[e.toLowerCase()]="variable")},n.prototype.getValue=function(e){return e&&0!=e.length?this.valuesHash[e]:null},n.prototype.setValue=function(e,t){""==t||null==t?delete this.valuesHash[e]:(this.valuesHash[e]=t,this.processedTextValues[e.toLowerCase()]="value"),this.notifyQuestionOnValueChanged(e,t),this.checkTriggers(e,t,!1)},n.prototype.getComment=function(e){var t=this.data[e+this.commentPrefix];return null==t&&(t=""),t},n.prototype.setComment=function(e,t){e+=this.commentPrefix,""==t||null==t?delete this.valuesHash[e]:this.valuesHash[e]=t},n.prototype.questionVisibilityChanged=function(e,t){this.updateVisibleIndexes(),this.onVisibleChanged.fire(this,{question:e,name:e.name,visible:t})},n.prototype.pageVisibilityChanged=function(e,t){this.updateVisibleIndexes(),this.onPageVisibleChanged.fire(this,{page:e,visible:t})},n.prototype.questionAdded=function(e,t){this.updateVisibleIndexes(),this.addQuestionToProcessedTextValues(e),this.onQuestionAdded.fire(this,{question:e,name:e.name,index:t})},n.prototype.questionRemoved=function(e){this.updateVisibleIndexes(),this.onQuestionRemoved.fire(this,{question:e,name:e.name})},n.prototype.validateQuestion=function(t){if(this.onValidateQuestion.isEmpty)return null;var n={name:t,value:this.getValue(t),error:null};return this.onValidateQuestion.fire(this,n),n.error?new e.CustomError(n.error):null},n.prototype.processHtml=function(e){var t={html:e};return this.onProcessHtml.fire(this,t),this.processText(t.html)},n.prototype.processText=function(e){return this.textPreProcessor.process(e)},n.prototype.getObjects=function(e,t){var n=[];return Array.prototype.push.apply(n,this.getPagesByNames(e)),Array.prototype.push.apply(n,this.getQuestionsByNames(t)),n},n.prototype.setTriggerValue=function(e,t,n){e&&(n?this.setVariable(e,t):this.setValue(e,t))},n}(e.Base);e.SurveyModel=t,e.JsonObject.metaData.addClass("survey",["locale","title","completedHtml:html","pages","questions","triggers:triggers","surveyId","surveyPostId","cookieName","sendResultOnPageNext:boolean","showNavigationButtons:boolean","showTitle:boolean","showPageTitles:boolean","showPageNumbers:boolean","showQuestionNumbers","showProgressBar","requiredText","pagePrevText","pageNextText","completeText"]),e.JsonObject.metaData.setPropertyValues("survey","pages","page"),e.JsonObject.metaData.setPropertyValues("survey","questions",null,null,function(e){return null},function(e,t,n){var o=e.addNewPage("");n.toObject({questions:t},o)}),e.JsonObject.metaData.setPropertyValues("survey","showNavigationButtons",null,!0),e.JsonObject.metaData.setPropertyValues("survey","showTitle",null,!0),e.JsonObject.metaData.setPropertyValues("survey","showPageTitles",null,!0),e.JsonObject.metaData.setPropertyValues("survey","showQuestionNumbers",null,"on"),e.JsonObject.metaData.setPropertyChoices("survey","showQuestionNumbers",["on","onPage","off"]),e.JsonObject.metaData.setPropertyValues("survey","showProgressBar",null,"off"),e.JsonObject.metaData.setPropertyChoices("survey","showProgressBar",["off","top","bottom"]),e.JsonObject.metaData.setPropertyValues("survey","requiredText",null,"* "),e.JsonObject.metaData.setPropertyValues("survey","pagePrevText",null,null,function(e){return e.pagePrevTextValue}),e.JsonObject.metaData.setPropertyValues("survey","pageNextText",null,null,function(e){return e.pageNextTextValue}),e.JsonObject.metaData.setPropertyValues("survey","completeText",null,null,function(e){return e.completeTextValue}),e.JsonObject.metaData.setPropertyClassInfo("survey","triggers","surveytrigger","trigger"),e.JsonObject.metaData.setPropertyClassInfo("survey","questions","question"),e.JsonObject.metaData.setPropertyChoices("survey","locale",null,function(){return e.surveyLocalization.getLocales()})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(e){t.call(this),this.surveyValue=this.createSurvey(e),this.surveyValue.showTitle=!1,this.windowElement=document.createElement("div")}return __extends(n,t),n.prototype.getType=function(){return"window"},Object.defineProperty(n.prototype,"survey",{get:function(){return this.surveyValue},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isShowing",{get:function(){return this.isShowingValue},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isExpanded",{get:function(){return this.isExpandedValue},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this.titleValue?this.titleValue:this.survey.title},set:function(e){this.titleValue=e},enumerable:!0,configurable:!0}),n.prototype.expand=function(){this.expandcollapse(!0)},n.prototype.collapse=function(){this.expandcollapse(!1)},n.prototype.createSurvey=function(t){return new e.SurveyModel(t)},n.prototype.expandcollapse=function(e){this.isExpandedValue=e},n.surveyElementName="windowSurveyJS",n}(e.Base);e.SurveyWindowModel=t}(Survey||(Survey={}));var Survey;!function(e){var t={pagePrevText:"Edellinen",pageNextText:"Seuraava",completeText:"Valmis",otherItemText:"Muu (kuvaile)",progressText:"Sivu {0}/{1}",optionsCaption:"Valitse...",requiredError:"Ole hyvä ja vastaa kysymykseen.",numericError:"Arvon tulee olla numeerinen.",textMinLength:"Ole hyvä ja syötä vähintään {0} merkkiä.",minSelectError:"Ole hyvä ja valitse vähintään {0} vaihtoehtoa.",maxSelectError:"Ole hyvä ja valitse enintään {0} vaihtoehtoa.",numericMinMax:"'{0}' täytyy olla enemmän tai yhtä suuri kuin {1} ja vähemmän tai yhtä suuri kuin {2}",numericMin:"'{0}' täytyy olla enemmän tai yhtä suuri kuin {1}",numericMax:"'{0}' täytyy olla vähemmän tai yhtä suuri kuin {1}"};e.surveyLocalization.locales.fi=t}(Survey||(Survey={}));var Survey;!function(e){var t={pagePrevText:"Zurück",pageNextText:"Weiter",completeText:"Fertig",progressText:"Seite {0} von {1}",emptySurvey:"Es gibt keine sichtbare Frage.",completingSurvey:"Vielen Dank für das Ausfüllen des Fragebogens!",loadingSurvey:"Der Fragebogen wird vom Server geladen...",otherItemText:"Andere (beschreiben)",optionsCaption:"Wählen...",requiredError:"Bitte antworten Sie auf die Frage.",numericError:"Der Wert sollte eine Zahl sein.",textMinLength:"Bitte geben Sie mindestens {0} Symbole.",minSelectError:"Bitte wählen Sie mindestens {0} Varianten.",maxSelectError:"Bitte wählen Sie nicth mehr als {0} Varianten.",numericMinMax:"'{0}' solte gleich oder größer sein als {1} und gleich oder kleiner als {2}",numericMin:"'{0}' solte gleich oder größer sein als {1}",numericMax:"'{0}' solte gleich oder kleiner als {1}",invalidEmail:"Bitte geben Sie eine gültige Email-Adresse ein."};e.surveyLocalization.locales.de=t}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t){void 0===t&&(t=""),e.call(this,t),this.koNo=ko.observable(""),this.onCreating()}return __extends(t,e),t.prototype.onCreating=function(){},t.prototype.onNumChanged=function(e){this.koNo(e>0?e+". ":"")},t}(e.PageModel);e.Page=t,e.JsonObject.metaData.overrideClassCreatore("page",function(){return new t})}(Survey||(Survey={}));var Survey;!function(e){var t=function(){function e(e){this.question=e;var t=this;e.visibilityChangedCallback=function(){t.onVisibilityChanged()},e.visibleIndexChangedCallback=function(){t.onVisibleIndexChanged()},this.koVisible=ko.observable(this.question.visible),this.koErrors=ko.observableArray(),this.koNo=ko.observable(this.getNo()),this.question.koVisible=this.koVisible,this.question.koNo=this.koNo,this.question.koErrors=this.koErrors}return e.prototype.onVisibilityChanged=function(){this.koVisible(this.question.visible)},e.prototype.onVisibleIndexChanged=function(){this.koNo(this.getNo())},e.prototype.getNo=function(){return this.question.visibleIndex>-1?this.question.visibleIndex+1+". ":""},e}();e.QuestionImplementorBase=t}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t){e.call(this,t),this.question=t,this.isUpdating=!1;var n=this;t.valueChangedCallback=function(){n.onValueChanged()},t.commentChangedCallback=function(){n.onCommentChanged()},t.errorsChangedCallback=function(){n.onErrorsChanged()},this.koValue=this.createkoValue(),this.koComment=ko.observable(this.question.comment),this.koErrors(this.question.errors),this.koValue.subscribe(function(e){n.updateValue(e)}),this.koComment.subscribe(function(e){n.updateComment(e)}),this.question.koValue=this.koValue,this.question.koComment=this.koComment}return __extends(t,e),t.prototype.onValueChanged=function(){this.isUpdating||this.setkoValue(this.question.value)},t.prototype.onCommentChanged=function(){this.isUpdating||this.koComment(this.question.comment)},t.prototype.onVisibilityChanged=function(){this.koVisible(this.question.visible)},t.prototype.onVisibleIndexChanged=function(){this.koNo(this.getNo())},t.prototype.onErrorsChanged=function(){this.koErrors(this.question.errors)},t.prototype.createkoValue=function(){return ko.observable(this.question.value)},t.prototype.setkoValue=function(e){this.koValue(e)},t.prototype.updateValue=function(e){this.isUpdating=!0,this.question.value=e,this.isUpdating=!1},t.prototype.updateComment=function(e){this.isUpdating=!0,this.question.comment=e,this.isUpdating=!1},t.prototype.getNo=function(){return this.question.visibleIndex>-1?this.question.visibleIndex+1+". ":""},t}(e.QuestionImplementorBase);e.QuestionImplementor=t}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t){e.call(this,t);var n=this;this.koOtherVisible=ko.computed(function(){return n.koValue(),n.isOtherSelected}),this.question.koOtherVisible=this.koOtherVisible}return __extends(t,e),Object.defineProperty(t.prototype,"isOtherSelected",{get:function(){return this.question.isOtherSelected},enumerable:!0,configurable:!0}),t}(e.QuestionImplementor);e.QuestionSelectBaseImplementor=t;var n=function(e){function t(t){e.call(this,t),this.koWidth=ko.observable(this.colWidth),this.question.koWidth=this.koWidth,this.question.koAfterRender=this.koAfterRender;var n=this;this.question.colCountChangedCallback=function(){n.onColCountChanged()}}return __extends(t,e),t.prototype.onColCountChanged=function(){this.question.koWidth=ko.observable(this.colWidth)},Object.defineProperty(t.prototype,"colWidth",{get:function(){var e=this.question.colCount;return e>0?100/e+"%":""},enumerable:!0,configurable:!0}),t.prototype.koAfterRender=function(e,t){var n=e[0];"#text"==n.nodeName&&(n.data=""),n=e[e.length-1],"#text"==n.nodeName&&(n.data="")},t}(t);e.QuestionCheckboxBaseImplementor=n}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype.createkoValue=function(){return this.question.value?ko.observableArray(this.question.value):ko.observableArray()},t.prototype.setkoValue=function(e){e?this.koValue([].concat(e)):this.koValue([])},t}(e.QuestionCheckboxBaseImplementor),n=function(e){function n(n){e.call(this,n),this.name=n,new t(this)}return __extends(n,e),n}(e.QuestionCheckboxModel);e.QuestionCheckbox=n,e.JsonObject.metaData.overrideClassCreatore("checkbox",function(){return new n("")}),e.QuestionFactory.Instance.registerQuestion("checkbox",function(t){var o=new n(t);return o.choices=e.QuestionFactory.DefaultChoices,o})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(n){t.call(this,n),this.name=n,new e.QuestionImplementor(this)}return __extends(n,t),n}(e.QuestionCommentModel);e.QuestionComment=t,e.JsonObject.metaData.overrideClassCreatore("comment",function(){return new t("")}),e.QuestionFactory.Instance.registerQuestion("comment",function(e){return new t(e)})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(n){t.call(this,n),this.name=n,new e.QuestionSelectBaseImplementor(this)}return __extends(n,t),n}(e.QuestionDropdownModel);e.QuestionDropdown=t,e.JsonObject.metaData.overrideClassCreatore("dropdown",function(){return new t("")}),e.QuestionFactory.Instance.registerQuestion("dropdown",function(n){var o=new t(n);return o.choices=e.QuestionFactory.DefaultChoices,o})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(n){t.call(this,n),this.name=n,new e.QuestionImplementorBase(this)}return __extends(n,t),n}(e.QuestionHtmlModel);e.QuestionHtml=t,e.JsonObject.metaData.overrideClassCreatore("html",function(){return new t("")}),e.QuestionFactory.Instance.registerQuestion("html",function(e){return new t(e)})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t,n,o,r,i){e.call(this,t,n,o,r,i),this.name=t,this.text=n,this.fullName=o,this.isValueUpdating=!1,this.koValue=ko.observable(this.value);var s=this;this.koValue.subscribe(function(e){s.isValueUpdating,s.value=e})}return __extends(t,e),t.prototype.onValueChanged=function(){this.isValueUpdating=!0,this.koValue(this.value),this.isValueUpdating=!1},t}(e.MatrixRowModel);e.MatrixRow=t;var n=function(n){function o(t){n.call(this,t),this.name=t,new e.QuestionImplementor(this)}return __extends(o,n),o.prototype.createMatrixRow=function(e,n,o,r){return new t(e,n,o,this,r)},o}(e.QuestionMatrixModel);e.QuestionMatrix=n,e.JsonObject.metaData.overrideClassCreatore("matrix",function(){return new n("")}),e.QuestionFactory.Instance.registerQuestion("matrix",function(e){var t=new n(e);return t.rows=["Row 1","Row 2"],t.columns=["Column 1","Column 2","Column 3"],t})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t,n,o,r){e.call(this,t,n,o,r),this.column=t,this.row=n,this.isValueUpdating=!1,this.koValue=ko.observable(this.value);var i=this;this.koValue.subscribe(function(e){i.isValueUpdating||(i.value=e)})}return __extends(t,e),t.prototype.onValueChanged=function(){this.isValueUpdating=!0,this.koValue(this.value),this.isValueUpdating=!1},t}(e.MatrixDropdownCellModel);e.MatrixDropdownCell=t;var n=function(e){function n(t,n,o,r){e.call(this,t,n,o,r),this.name=t,this.text=n}return __extends(n,e),n.prototype.createCell=function(e,n){return new t(e,this,this.data,n)},n}(e.MatrixDropdownRowModel);e.MatrixDropdownRow=n;var o=function(t){function o(n){t.call(this,n),this.name=n,new e.QuestionImplementor(this)}return __extends(o,t),o.prototype.createMatrixRow=function(e,t,o){return new n(e,t,this,o)},o}(e.QuestionMatrixDropdownModel);e.QuestionMatrixDropdown=o,e.JsonObject.metaData.overrideClassCreatore("matrixdropdown",function(){return new o("")}),e.QuestionFactory.Instance.registerQuestion("matrixdropdown",function(e){var t=new o(e);return t.choices=[1,2,3,4,5],t.rows=["Row 1","Row 2"],t.addColumn("Column 1"),t.addColumn("Column 2"),t.addColumn("Column 3"),t})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null),e.call(this,t,n),this.name=t,this.isKOValueUpdating=!1,this.koValue=ko.observable(this.value);var o=this;this.koValue.subscribe(function(e){o.isKOValueUpdating||(o.value=e)})}return __extends(t,e),t.prototype.onValueChanged=function(e){this.isKOValueUpdating=!0,this.koValue(e),this.isKOValueUpdating=!1},t}(e.MultipleTextItemModel);e.MultipleTextItem=t;var n=function(e){function t(t){e.call(this,t),this.koRows=ko.observableArray(this.question.getRows()),this.question.koRows=this.koRows,this.onColCountChanged();var n=this;this.question.colCountChangedCallback=function(){n.onColCountChanged()}}return __extends(t,e),t.prototype.onColCountChanged=function(){this.koRows(this.question.getRows())},t}(e.QuestionImplementor);e.QuestionMultipleTextImplementor=n;var o=function(e){function o(t){e.call(this,t),this.name=t,new n(this)}return __extends(o,e),o.prototype.createTextItem=function(e,n){return new t(e,n)},o}(e.QuestionMultipleTextModel);e.QuestionMultipleText=o,e.JsonObject.metaData.overrideClassCreatore("multipletextitem",function(){return new t("")}),e.JsonObject.metaData.overrideClassCreatore("multipletext",function(){return new o("")}),e.QuestionFactory.Instance.registerQuestion("multipletext",function(e){var t=new o(e);return t.AddItem("text1"),t.AddItem("text2"),t})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(n){t.call(this,n),this.name=n,new e.QuestionCheckboxBaseImplementor(this)}return __extends(n,t),n}(e.QuestionRadiogroupModel);e.QuestionRadiogroup=t,e.JsonObject.metaData.overrideClassCreatore("radiogroup",function(){return new t("")}),e.QuestionFactory.Instance.registerQuestion("radiogroup",function(n){var o=new t(n);return o.choices=e.QuestionFactory.DefaultChoices,o})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t){e.call(this,t),this.koVisibleRateValues=ko.observableArray(this.getValues()),this.question.koVisibleRateValues=this.koVisibleRateValues;var n=this;this.koChange=function(e){n.koValue(e.itemValue)},this.question.koChange=this.koChange,this.question.rateValuesChangedCallback=function(){n.onRateValuesChanged()},this.question.koGetCss=function(e){var t=n.question.itemCss;return n.question.koValue()==e.value?t+" active":t}}return __extends(t,e),t.prototype.onRateValuesChanged=function(){this.koVisibleRateValues(this.getValues())},t.prototype.getValues=function(){return this.question.visibleRateValues},t}(e.QuestionImplementor),n=function(e){function n(n){e.call(this,n),this.name=n,new t(this)}return __extends(n,e),n.prototype.onSetData=function(){this.itemCss=this.data.css.rating.item},n}(e.QuestionRatingModel);e.QuestionRating=n,e.JsonObject.metaData.overrideClassCreatore("rating",function(){return new n("")}),e.QuestionFactory.Instance.registerQuestion("rating",function(e){return new n(e)})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(n){t.call(this,n),this.name=n,new e.QuestionImplementor(this)}return __extends(n,t),n}(e.QuestionTextModel);e.QuestionText=t,e.JsonObject.metaData.overrideClassCreatore("text",function(){return new t("")}),e.QuestionFactory.Instance.registerQuestion("text",function(e){return new t(e)})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(n,o,r){if(void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r=null),t.call(this,n),this.onRendered=new e.Event,r&&(this.css=r),o&&(this.renderedElement=o),"undefined"==typeof ko)throw new Error("knockoutjs library is not loaded.");this.render(o)}return __extends(n,t),Object.defineProperty(n.prototype,"css",{get:function(){return this.cssValue},set:function(e){this.mergeValues(e,this.cssValue)},enumerable:!0,configurable:!0}),n.prototype.render=function(e){void 0===e&&(e=null);var t=this;e&&"string"==typeof e&&(e=document.getElementById(e)),e&&(this.renderedElement=e),e=this.renderedElement,e&&(e.innerHTML=this.getTemplate(),t.applyBinding(),t.onRendered.fire(t,{}))},n.prototype.loadSurveyFromService=function(e,n){void 0===e&&(e=null),void 0===n&&(n=null),n&&(this.renderedElement=n),t.prototype.loadSurveyFromService.call(this,e)},n.prototype.setCompleted=function(){t.prototype.setCompleted.call(this),this.updateKoCurrentPage()},n.prototype.createNewPage=function(t){return new e.Page(t)},n.prototype.createCssObject=function(){return null},n.prototype.getTemplate=function(){throw new Error("Please override this method")},n.prototype.onBeforeCreating=function(){var e=this;this.cssValue=this.createCssObject(),this.dummyObservable=ko.observable(0),this.koCurrentPage=ko.computed(function(){return e.dummyObservable(),e.currentPage}),this.koIsFirstPage=ko.computed(function(){return e.dummyObservable(),e.isFirstPage}),this.koIsLastPage=ko.computed(function(){return e.dummyObservable(),e.isLastPage}),this.koProgressText=ko.computed(function(){return e.dummyObservable(),e.progressText}),this.koProgress=ko.computed(function(){return e.dummyObservable(),e.getProgress()}),this.koState=ko.computed(function(){return e.dummyObservable(),e.state})},n.prototype.currentPageChanged=function(e,n){this.updateKoCurrentPage(),t.prototype.currentPageChanged.call(this,e,n)},n.prototype.onLoadSurveyFromService=function(){this.render()},n.prototype.onLoadingSurveyFromService=function(){this.render()},n.prototype.applyBinding=function(){this.renderedElement&&(this.updateKoCurrentPage(),ko.cleanNode(this.renderedElement),ko.applyBindings(this,this.renderedElement))},n.prototype.updateKoCurrentPage=function(){this.dummyObservable(this.dummyObservable()+1)},n}(e.SurveyModel);e.SurveyBase=t}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(e){t.call(this,e),this.koExpanded=ko.observable(!1);var n=this;this.doExpand=function(){n.changeExpanded()},this.survey.onComplete.add(function(e){n.onComplete()})}return __extends(n,t),n.prototype.createSurvey=function(t){return new e.SurveyBase(t)},n.prototype.expandcollapse=function(e){t.prototype.expandcollapse.call(this,e),this.koExpanded(this.isExpandedValue)},Object.defineProperty(n.prototype,"template",{get:function(){return this.templateValue?this.templateValue:this.getDefaultTemplate()},set:function(e){this.templateValue=e},enumerable:!0,configurable:!0}),n.prototype.show=function(){this.windowElement.innerHTML=this.template,ko.cleanNode(this.windowElement),ko.applyBindings(this,this.windowElement),document.body.appendChild(this.windowElement),this.survey.render(e.SurveyWindow.surveyElementName),this.isShowingValue=!0},n.prototype.getDefaultTemplate=function(){throw new Error("Please override this method")},n.prototype.hide=function(){document.body.removeChild(this.windowElement),this.windowElement.innerHTML="",this.isShowingValue=!1},n.prototype.changeExpanded=function(){this.expandcollapse(!this.isExpanded)},n.prototype.onComplete=function(){this.hide()},n}(e.SurveyWindowModel);e.SurveyWindowBase=t}(Survey||(Survey={}));var Survey;!function(e){var t=function(){function e(){}return e.prototype.replaceText=function(e,t,n){void 0===n&&(n=null),t=this.getId(t,n);var o=this.text.indexOf(t);if(!(0>o||(o=this.text.indexOf(">",o),0>o))){var r=o+1,i="</script>";o=this.text.indexOf(i,r),0>o||(this.text=this.text.substr(0,r)+e+this.text.substr(o))}},e.prototype.getId=function(e,t){var n='id="survey-'+e;return t&&(n+="-"+t),n+'"'},Object.defineProperty(e.prototype,"text",{get:function(){return""},set:function(e){},enumerable:!0,configurable:!0}),e}();e.SurveyTemplateTextBase=t}(Survey||(Survey={}));var template;!function(e){var t;!function(e){e.html='<script type="text/html" id="survey-comment">  <input data-bind="value:$data.question.koComment, visible:$data.visible, css: $root.css.question.comment" /></script><script type="text/html" id="survey-index">    <div data-bind="visible: (title.length > 0) && showTitle && koState() != \'completed\', css: $root.css.header">        <h3 data-bind="text:title"></h3>    </div>    <!-- ko if: koState() == "running" -->    <div data-bind="css: $root.css.body">        <div data-bind="visible: showProgressBar ==\'top\', template: { name: \'survey-progress\', data: $data }"></div>        <div data-bind="template: { name: \'survey-page\', data: koCurrentPage }"></div>        <div style="margin-top:10px" data-bind="visible: showProgressBar ==\'bottom\', template: { name: \'survey-progress\', data: $data }"></div>    </div>    <div data-bind="visible: showNavigationButtons && !isDesignMode, css: $root.css.footer">        <input type="button" data-bind="value: pagePrevText, click: prevPage, visible: !koIsFirstPage(), css: $root.css.navigationButton" />        <input type="button" data-bind="value: pageNextText, click: nextPage, visible: !koIsLastPage(), css: $root.css.navigationButton" />        <input type="button" data-bind="value: completeText, click: completeLastPage, visible: koIsLastPage(), css: $root.css.navigationButton" />    </div>    <!-- /ko -->    <!-- ko if: koState() == "completed" -->    <div data-bind="html: processedCompletedHtml"></div>    <!-- /ko -->    <!-- ko if: koState() == "loading" -->    <div data-bind="html: processedLoadingHtml"></div>    <!-- /ko -->    <!-- ko if: koState() == "empty" -->    <div data-bind="text:emptySurveyText, css: $root.css.body"></div>    <!-- /ko --></script><script type="text/html" id="survey-page">    <h4 data-bind="visible: (title.length > 0) && data.showPageTitles, text: koNo() + processedTitle, css: $root.css.pageTitle"></h4>    <!-- ko foreach: { data: questions, as: \'question\' } -->        <!-- ko template: { name: \'survey-question\', data: question } -->        <!-- /ko -->    <!-- /ko --></script><script type="text/html" id="survey-question-checkbox">    <form data-bind="css: $root.css.checkbox.root">        <!-- ko foreach: { data: question.visibleChoices, as: \'item\', afterRender: question.koAfterRender}  -->        <div data-bind="style:{width: question.koWidth, \'margin-right\': question.colCount == 0 ? \'5px\': \'0px\'}, css: $root.css.checkbox.item">            <input type="checkbox" data-bind="attr: {name: question.name, value: item.value}, checked: question.koValue" />            <span data-bind="text: item.text"></span>            <div data-bind="visible: question.hasOther && ($index() == question.visibleChoices.length-1)">                <div data-bind="template: { name: \'survey-comment\', data: {\'question\': question, \'visible\': question.koOtherVisible } }, css: $root.css.checkbox.other"></div>            </div>        </div>        <!-- /ko -->    </form></script><script type="text/html" id="survey-question-comment">    <textarea type="text" data-bind="attr: {cols: question.cols, rows: question.rows}, value:question.koValue, css: $root.css.comment" /></script><script type="text/html" id="survey-question-dropdown">    <select data-bind="options: question.visibleChoices, optionsText: \'text\', optionsValue: \'value\', value: question.koValue, optionsCaption: question.optionsCaption, css: $root.css.dropdown"></select>    <div data-bind="visible: question.hasOther">        <div data-bind="template: { name: \'survey-comment\', data: {\'question\': question, \'visible\': question.koOtherVisible } }"></div>    </div></script><script type="text/html" id="survey-question-html">    <div data-bind="html: question.processedHtml"></div></script><script type="text/html" id="survey-question-matrix">    <table data-bind="css: $root.css.matrix.root">        <thead>            <tr>                <th data-bind="visible: question.hasRows"></th>                <!-- ko foreach: question.columns -->                <th data-bind="text:$data.text"></th>                <!-- /ko -->            </tr>        </thead>        <tbody>            <!-- ko foreach: { data: question.visibleRows, as: \'row\' } -->            <tr>                <td data-bind="visible: question.hasRows, text:row.text"></td>                <!-- ko foreach: question.columns -->                <td>                    <input type="radio" data-bind="attr: {name: row.fullName, value: $data.value}, checked: row.koValue"/>                </td>                <!-- /ko -->            </tr>            <!-- /ko -->        </tbody>    </table></script><script type="text/html" id="survey-question-matrixdropdown">    <table data-bind="css: $root.css.matrixdropdown.root">        <thead>            <tr>                <th></th>                <!-- ko foreach: question.columns -->                <th data-bind="text:$data.title"></th>                <!-- /ko -->            </tr>        </thead>        <tbody>            <!-- ko foreach: { data: question.visibleRows, as: \'row\' } -->            <tr>                <td data-bind="text:row.text"></td>                <!-- ko foreach: row.cells-->                <td>                    <select data-bind="options: $data.choices, optionsText: \'text\', optionsValue: \'value\', value: $data.koValue, optionsCaption: $data.optionsCaption"></select>                </td>                <!-- /ko -->            </tr>            <!-- /ko -->        </tbody>    </table></script><script type="text/html" id="survey-question-multipletext">    <table data-bind="css: $root.css.multipletext.root, foreach: { data:  question.koRows, as: \'row\' }">        <tr data-bind="foreach: { data: row, as: \'item\' }">            <td data-bind="text: item.title, css: $root.css.multipletext.itemTitle"></td>            <td><input type="text" style="float:left" data-bind="attr: {size: question.itemSize}, value: item.koValue, css: $root.css.multipletext.itemValue" /></td>        </tr>    </table></script><script type="text/html" id="survey-question-radiogroup">    <form data-bind="css: $root.css.radiogroup.root">        <!-- ko foreach: { data: question.visibleChoices, as: \'item\', afterRender: question.koAfterRender}  -->        <div  data-bind="style:{width: question.koWidth, \'margin-right\': question.colCount == 0 ? \'5px\': \'0px\'}, css: $root.css.radiogroup.item">            <input type="radio" data-bind="attr: {name: question.name, value: item.value}, checked: question.koValue" />            <span data-bind="text: item.text"></span>            <div data-bind="visible: question.hasOther && ($index() == question.visibleChoices.length-1)">                <div data-bind="template: { name: \'survey-comment\', data: {\'question\': question, \'visible\': question.koOtherVisible}}, css: $root.css.radiogroup.other"></div>            </div>        </div>        <!-- /ko -->    </form></script><script type="text/html" id="survey-question-text">    <input type="text" data-bind="attr: {size: question.size}, value:question.koValue, css: $root.css.text"/></script><script type="text/html" id="survey-question">    <div data-bind="visible: question.koVisible(), css: $root.css.question.root">        <!-- ko if: question.hasTitle -->        <h5 data-bind="text: question.koNo() +  (question.isRequired ? question.requiredText : \'\') + question.processedTitle, css: $root.css.question.title"></h5>        <!-- /ko -->        <!-- ko template: { name: \'survey-question-errors\', data: question } -->        <!-- /ko -->        <!-- ko template: { name: \'survey-question-\' + question.getType(), data: question } -->        <!-- /ko -->        <div data-bind="visible: question.hasComment">            <div data-bind="text:$root.getLocString(\'otherItemText\')"></div>            <div data-bind="template: { name: \'survey-comment\', data: {\'question\': question, \'visible\': true } }"></div>        </div>    </div></script><div data-bind="css: $root.css.root">    <!-- ko template: { name: \'survey-index\'} -->    <!-- /ko --></div><script type="text/html" id="survey-progress">    <div data-bind="text:koProgressText, css: $root.css.progress"></div></script><script type="text/html" id="survey-question-errors">    <div data-bind="visible: koErrors().length > 0, foreach: koErrors, css: $root.css.error.root">        <div data-bind="text:$data.getText(), css: $root.css.error.item"></div>    </div></script><script type="text/html" id="survey-question-rating">    <table data-bind="css: $root.css.rating.root">        <thead>            <tr>                <th></th>                <!-- ko foreach: question.koVisibleRateValues -->                <th data-bind="text:$data.text"></th>                <!-- /ko -->                <th></th>            </tr>        </thead>        <tbody>            <tr>                <td data-bind="text:question.mininumRateDescription"></td>                <!-- ko foreach: question.koVisibleRateValues -->                <td>                    <input type="radio" data-bind="attr: {name: question.name, value: $data.value}, checked: question.koValue" />                </td>                <!-- /ko -->                <td data-bind="text:question.maximumRateDescription"></td>            </tr>        </tbody>    </table>    <div data-bind="visible: question.hasOther">        <div data-bind="template: { name: \'survey-comment\', data: {\'question\': question } }"></div>    </div></script>';
}(t=e.ko||(e.ko={}))}(template||(template={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t,n,o){void 0===t&&(t=null),void 0===n&&(n=null),void 0===o&&(o=null),e.call(this,t,n,o)}return __extends(t,e),t.prototype.getTemplate=function(){return template.ko.html},t.prototype.createCssObject=function(){return{root:"sv_main",header:"",body:"sv_body",footer:"sv_nav",navigationButton:"",progress:"sv_progress",pageTitle:"sv_p_title",question:{root:"sv_q",title:"sv_q_title",comment:""},error:{root:"sv_q_erbox",item:""},checkbox:{root:"sv_qcbc",item:"sv_q_checkbox",other:"sv_q_other"},comment:"",dropdown:"",matrix:{root:"sv_q_matrix"},matrixdropdown:{root:"sv_q_matrix"},multipletext:{root:"",itemTitle:"",itemValue:""},radiogroup:{root:"sv_qcbc",item:"sv_q_radiogroup",other:"sv_q_other"},rating:{root:"sv_q_rating",item:""},text:""}},t}(e.SurveyBase);e.Survey=t}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(e){t.call(this,e)}return __extends(n,t),n.prototype.createSurvey=function(t){return new e.Survey(t)},n.prototype.getDefaultTemplate=function(){return template.window.ko.html},n}(e.SurveyWindowBase);e.SurveyWindow=t}(Survey||(Survey={}));var template;!function(e){var t;!function(e){var t;!function(e){e.html='<div class="sv_window">    <div class="sv_window_title"><a href="#" data-bind="click:doExpand" style="width:100%"><span data-bind="text:title"></span></a></div>    <div data-bind="visible:koExpanded">        <div class="sv_window_content" id="windowSurveyJS"></div>    </div></div>'}(t=e.ko||(e.ko={}))}(t=e.window||(e.window={}))}(template||(template={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return template.ko.html},set:function(e){template.ko.html=e},enumerable:!0,configurable:!0}),t}(e.SurveyTemplateTextBase);e.SurveyTemplateText=t}(Survey||(Survey={}));